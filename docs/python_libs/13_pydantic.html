<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.41">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>13 FastAPI, Pydantic – Python Math &amp; ML Course</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../python_libs/00_misc_libraries.html" rel="next">
<link href="../python_libs/12_sql.html" rel="prev">
<link href="../assets/metric.webp" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ba1dc69c819719ff92c66bffe944bb46.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-45c9daaf6acd34b0420988892e8b8644.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-7fe27d669c2c9815f007ef6e49b33cf3.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-7dae178cec1b9eccbcf055202f48df61.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    var sidebar = document.getElementById('quarto-sidebar');
    var logo = sidebar.getElementsByTagName('img')[0];
    
    sidebar.insertBefore(logo, sidebar.firstChild);
  });
</script>
<style>
div.callout-python.callout {
  border-left-color: #001489;
}
div.callout-python.callout-style-default > .callout-header {
  background-color: rgba(0, 20, 137, 0.13);
}
div.callout-python .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-python.callout-style-default .callout-icon::before, div.callout-python.callout-titled .callout-icon::before {
  content: '🐍';
  background-image: none;
}
div.callout-libs.callout {
  border-left-color: #FF9E1B;
}
div.callout-libs.callout-style-default > .callout-header {
  background-color: rgba(255, 158, 27, 0.13);
}
div.callout-libs .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-libs.callout-style-default .callout-icon::before, div.callout-libs.callout-titled .callout-icon::before {
  content: '📦';
  background-image: none;
}
div.callout-ml.callout {
  border-left-color: #001489;
}
div.callout-ml.callout-style-default > .callout-header {
  background-color: rgba(0, 20, 137, 0.13);
}
div.callout-ml .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-ml.callout-style-default .callout-icon::before, div.callout-ml.callout-titled .callout-icon::before {
  content: '🤖';
  background-image: none;
}
div.callout-misc.callout {
  border-left-color: #FF9E1B;
}
div.callout-misc.callout-style-default > .callout-header {
  background-color: rgba(255, 158, 27, 0.13);
}
div.callout-misc .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-misc.callout-style-default .callout-icon::before, div.callout-misc.callout-titled .callout-icon::before {
  content: '🧀';
  background-image: none;
}
div.callout-math.callout {
  border-left-color: #D90012;
}
div.callout-math.callout-style-default > .callout-header {
  background-color: rgba(217, 0, 18, 0.13);
}
div.callout-math .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-math.callout-style-default .callout-icon::before, div.callout-math.callout-titled .callout-icon::before {
  content: '📈';
  background-image: none;
}
div.callout-links.callout {
  border-left-color: #D90012;
}
div.callout-links.callout-style-default > .callout-header {
  background-color: rgba(217, 0, 18, 0.13);
}
div.callout-links .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-links.callout-style-default .callout-icon::before, div.callout-links.callout-titled .callout-icon::before {
  content: '🔗';
  background-image: none;
}
</style>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../python_libs/01_openai_api_timestamp_generator.html">Libraries</a></li><li class="breadcrumb-item"><a href="../python_libs/13_pydantic.html"><span class="chapter-title">13 FastAPI, Pydantic</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../assets/metric.webp" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Python Math &amp; ML Course</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/HaykTarkhanyan/python_math_ml_course" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Python, Math, Machine Learning Course</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/01_intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">01 Intro: Print, Comments, Variables, Numbers, Input</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/02_conditions.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">02 Conditionals: if, elif, else, match, nested if</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/03_str_range_list_some_funcs.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">03 String, Range, List, Some functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/04_loops.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">04 Loops: For, While, Break, Continue, Else</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/05_lst_str_methods_one_line_if_for.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">05 List/String Methods; Ternary Operators; List Comprehensions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/06_tuple_set_dictionary.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">06 Tuple, Set, Dictionary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/07_functions_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">07 Functions 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/08_functions_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">08 Functions 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/09_files_packages_terminal.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">09 Terminal, Packages, File I/O</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/10_git_conda_pep8.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10 Git, Anaconda (venvs), PEP8</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/11_exception_handling.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11 Exception handling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/12_streamlit_recursion.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12 Streamlit, Recursion, Misc</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/13_decorators.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">13 Decorators</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/14_classes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">14 OOP 1: Classes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/15_inheritance_polymorphism.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">15 OOP 2: Inheritance, Polymorphism</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/16_encapsulation_abstraction.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">16 OOP 3: Encapsulation, Abstraction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/17_dataclass_iterator_generator_context_manager.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">17 OOP 4: Data Class, Iterators, Generators, Context Managers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python/18_youtube_translator.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">18 Final Project: YouTube Transcript Translator</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Libraries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/01_openai_api_timestamp_generator.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">01 OpenAI + Timestamp</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/02_numpy.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">02 NumPy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/03_pandas_1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">03 Pandas 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/04_pandas_2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">04 Pandas 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/05_noble_people_analysis.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">05 Noble People Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/06_data_viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">06 Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/07_kargin_project.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">07 Kargin Project</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/08_logging__clis.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">08: Logging, CLIs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/09_testing__debugging.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">09 Testing + Debugging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/10_scraping__parallelization.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10 Scraping; Parallel Processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/11_ysu_scraping.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">11: YSU Scraping</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/12_sql.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12 SQL (with Python)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/13_pydantic.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">13 FastAPI, Pydantic</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../python_libs/00_misc_libraries.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">00 Misc: python-dotenv, ToDo</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Misc</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/google_colab.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Google Colab-ից օգտվել</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#նկարագիր" id="toc-նկարագիր" class="nav-link active" data-scroll-target="#նկարագիր">📌 Նկարագիր</a></li>
  <li><a href="#pydantic-tutorial" id="toc-pydantic-tutorial" class="nav-link" data-scroll-target="#pydantic-tutorial">📚 Pydantic Tutorial</a>
  <ul class="collapse">
  <li><a href="#what-is-pydantic" id="toc-what-is-pydantic" class="nav-link" data-scroll-target="#what-is-pydantic">What is Pydantic?</a>
  <ul class="collapse">
  <li><a href="#key-features" id="toc-key-features" class="nav-link" data-scroll-target="#key-features">Key Features:</a></li>
  <li><a href="#why-use-pydantic" id="toc-why-use-pydantic" class="nav-link" data-scroll-target="#why-use-pydantic">Why Use Pydantic?</a></li>
  </ul></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#basic-pydantic-models" id="toc-basic-pydantic-models" class="nav-link" data-scroll-target="#basic-pydantic-models">Basic Pydantic Models</a></li>
  <li><a href="#data-validation" id="toc-data-validation" class="nav-link" data-scroll-target="#data-validation">Data Validation</a></li>
  <li><a href="#field-constraints-and-custom-validators" id="toc-field-constraints-and-custom-validators" class="nav-link" data-scroll-target="#field-constraints-and-custom-validators">Field Constraints and Custom Validators</a>
  <ul class="collapse">
  <li><a href="#custom-validators" id="toc-custom-validators" class="nav-link" data-scroll-target="#custom-validators">Custom validators</a></li>
  </ul></li>
  <li><a href="#config" id="toc-config" class="nav-link" data-scroll-target="#config">Config</a></li>
  <li><a href="#json-schema" id="toc-json-schema" class="nav-link" data-scroll-target="#json-schema">Json Schema</a></li>
  <li><a href="#enum" id="toc-enum" class="nav-link" data-scroll-target="#enum">Enum</a>
  <ul class="collapse">
  <li><a href="#why-enum" id="toc-why-enum" class="nav-link" data-scroll-target="#why-enum">Why enum?</a></li>
  <li><a href="#enum-vs-typing.literal" id="toc-enum-vs-typing.literal" class="nav-link" data-scroll-target="#enum-vs-typing.literal">Enum vs typing.Literal</a></li>
  <li><a href="#enums-with-pydantic" id="toc-enums-with-pydantic" class="nav-link" data-scroll-target="#enums-with-pydantic">Enums with Pydantic</a></li>
  <li><a href="#we-can-add-methods-to-enums" id="toc-we-can-add-methods-to-enums" class="nav-link" data-scroll-target="#we-can-add-methods-to-enums">We can add methods to enums</a></li>
  </ul></li>
  <li><a href="#complex-data-structures-and-nested-models" id="toc-complex-data-structures-and-nested-models" class="nav-link" data-scroll-target="#complex-data-structures-and-nested-models">Complex Data Structures and Nested Models</a></li>
  </ul></li>
  <li><a href="#fastapi-tutorial" id="toc-fastapi-tutorial" class="nav-link" data-scroll-target="#fastapi-tutorial">🚀 FastAPI Tutorial</a>
  <ul class="collapse">
  <li><a href="#what-is-fastapi" id="toc-what-is-fastapi" class="nav-link" data-scroll-target="#what-is-fastapi">What is FastAPI?</a>
  <ul class="collapse">
  <li><a href="#key-features-1" id="toc-key-features-1" class="nav-link" data-scroll-target="#key-features-1">Key Features:</a></li>
  <li><a href="#why-fastapi" id="toc-why-fastapi" class="nav-link" data-scroll-target="#why-fastapi">Why FastAPI?</a></li>
  </ul></li>
  <li><a href="#understanding-rest-apis" id="toc-understanding-rest-apis" class="nav-link" data-scroll-target="#understanding-rest-apis">Understanding REST APIs</a>
  <ul class="collapse">
  <li><a href="#what-is-rest" id="toc-what-is-rest" class="nav-link" data-scroll-target="#what-is-rest">What is REST?</a></li>
  <li><a href="#rest-api-structure" id="toc-rest-api-structure" class="nav-link" data-scroll-target="#rest-api-structure">REST API Structure</a></li>
  </ul></li>
  <li><a href="#basic-fastapi-routes" id="toc-basic-fastapi-routes" class="nav-link" data-scroll-target="#basic-fastapi-routes">Basic FastAPI Routes</a></li>
  <li><a href="#using-pydantic-models-with-fastapi" id="toc-using-pydantic-models-with-fastapi" class="nav-link" data-scroll-target="#using-pydantic-models-with-fastapi">Using Pydantic Models with FastAPI</a></li>
  <li><a href="#advanced-fastapi-features" id="toc-advanced-fastapi-features" class="nav-link" data-scroll-target="#advanced-fastapi-features">Advanced FastAPI Features</a>
  <ul class="collapse">
  <li><a href="#query-parameters-with-validation" id="toc-query-parameters-with-validation" class="nav-link" data-scroll-target="#query-parameters-with-validation">Query Parameters with Validation</a></li>
  <li><a href="#dependencies" id="toc-dependencies" class="nav-link" data-scroll-target="#dependencies">Dependencies</a></li>
  <li><a href="#error-handling" id="toc-error-handling" class="nav-link" data-scroll-target="#error-handling">Error Handling</a></li>
  <li><a href="#background-tasks" id="toc-background-tasks" class="nav-link" data-scroll-target="#background-tasks">Background Tasks</a></li>
  </ul></li>
  <li><a href="#running-the-fastapi-server" id="toc-running-the-fastapi-server" class="nav-link" data-scroll-target="#running-the-fastapi-server">Running the FastAPI Server</a></li>
  <li><a href="#fastapi-vs-flask-comparison" id="toc-fastapi-vs-flask-comparison" class="nav-link" data-scroll-target="#fastapi-vs-flask-comparison">FastAPI vs Flask Comparison</a></li>
  <li><a href="#testing-your-api" id="toc-testing-your-api" class="nav-link" data-scroll-target="#testing-your-api">Testing Your API</a></li>
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices">Best Practices</a>
  <ul class="collapse">
  <li><a href="#pydantic-best-practices" id="toc-pydantic-best-practices" class="nav-link" data-scroll-target="#pydantic-best-practices">Pydantic Best Practices:</a></li>
  <li><a href="#fastapi-best-practices" id="toc-fastapi-best-practices" class="nav-link" data-scroll-target="#fastapi-best-practices">FastAPI Best Practices:</a></li>
  <li><a href="#project-structure" id="toc-project-structure" class="nav-link" data-scroll-target="#project-structure">Project Structure:</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a>
  <ul class="collapse">
  <li><a href="#what-we-learned" id="toc-what-we-learned" class="nav-link" data-scroll-target="#what-we-learned">What We Learned:</a></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps">Next Steps:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#գործնական" id="toc-գործնական" class="nav-link" data-scroll-target="#գործնական">🛠️ Գործնական</a>
  <ul class="collapse">
  <li><a href="#exercise-1-pydantic-models" id="toc-exercise-1-pydantic-models" class="nav-link" data-scroll-target="#exercise-1-pydantic-models">Exercise 1: Pydantic Models</a></li>
  <li><a href="#exercise-2-fastapi-blog-api" id="toc-exercise-2-fastapi-blog-api" class="nav-link" data-scroll-target="#exercise-2-fastapi-blog-api">Exercise 2: FastAPI Blog API</a>
  <ul class="collapse">
  <li><a href="#models-needed" id="toc-models-needed" class="nav-link" data-scroll-target="#models-needed">Models needed:</a></li>
  <li><a href="#endpoints-to-implement" id="toc-endpoints-to-implement" class="nav-link" data-scroll-target="#endpoints-to-implement">Endpoints to implement:</a></li>
  </ul></li>
  <li><a href="#exercise-3-advanced-features" id="toc-exercise-3-advanced-features" class="nav-link" data-scroll-target="#exercise-3-advanced-features">Exercise 3: Advanced Features</a></li>
  <li><a href="#challenge-e-commerce-api" id="toc-challenge-e-commerce-api" class="nav-link" data-scroll-target="#challenge-e-commerce-api">Challenge: E-commerce API</a></li>
  </ul></li>
  <li><a href="#տնային-1" id="toc-տնային-1" class="nav-link" data-scroll-target="#տնային-1">🏡Տնային</a>
  <ul class="collapse">
  <li><a href="#homework-1-library-management-system-pydantic-focus" id="toc-homework-1-library-management-system-pydantic-focus" class="nav-link" data-scroll-target="#homework-1-library-management-system-pydantic-focus">Homework 1: Library Management System (Pydantic Focus)</a>
  <ul class="collapse">
  <li><a href="#required-models" id="toc-required-models" class="nav-link" data-scroll-target="#required-models">Required Models:</a></li>
  <li><a href="#requirements" id="toc-requirements" class="nav-link" data-scroll-target="#requirements">Requirements:</a></li>
  </ul></li>
  <li><a href="#homework-2-task-management-api-fastapi-focus" id="toc-homework-2-task-management-api-fastapi-focus" class="nav-link" data-scroll-target="#homework-2-task-management-api-fastapi-focus">Homework 2: Task Management API (FastAPI Focus)</a>
  <ul class="collapse">
  <li><a href="#features-required" id="toc-features-required" class="nav-link" data-scroll-target="#features-required">Features Required:</a></li>
  <li><a href="#technical-requirements" id="toc-technical-requirements" class="nav-link" data-scroll-target="#technical-requirements">Technical Requirements:</a></li>
  </ul></li>
  <li><a href="#homework-3-integration-project" id="toc-homework-3-integration-project" class="nav-link" data-scroll-target="#homework-3-integration-project">Homework 3: Integration Project</a>
  <ul class="collapse">
  <li><a href="#models-pydantic" id="toc-models-pydantic" class="nav-link" data-scroll-target="#models-pydantic">Models (Pydantic):</a></li>
  <li><a href="#api-fastapi" id="toc-api-fastapi" class="nav-link" data-scroll-target="#api-fastapi">API (FastAPI):</a></li>
  <li><a href="#deliverables" id="toc-deliverables" class="nav-link" data-scroll-target="#deliverables">Deliverables:</a></li>
  <li><a href="#bonus-points" id="toc-bonus-points" class="nav-link" data-scroll-target="#bonus-points">Bonus Points:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">🎲 00</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.dev/HaykTarkhanyan/python_math_ml_course/blob/main/python_libs/13_pydantic.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../python_libs/01_openai_api_timestamp_generator.html">Libraries</a></li><li class="breadcrumb-item"><a href="../python_libs/13_pydantic.html"><span class="chapter-title">13 FastAPI, Pydantic</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">13 FastAPI, Pydantic</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><img src="../background_photos/.png" class="img-fluid" alt="image.png"> <a href="https://unsplash.com/photos/a-large-mountain-with-a-very-tall-cliff-UiP9KfVe3aQ">լուսանկարի հղումը</a>, Հեղինակ՝ <a href=""></a></p>
<p><a href="ToDo" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"></a> (ToDo)</p>
<blockquote class="blockquote">
<p>Song reference - ToDo</p>
</blockquote>
<section id="նկարագիր" class="level1">
<h1>📌 Նկարագիր</h1>
<p><a href="">📚 Ամբողջական նյութը</a></p>
<section id="տեսանյութեր" class="level4">
<h4 class="anchored" data-anchor-id="տեսանյութեր">📺 Տեսանյութեր</h4>
</section>
<section id="տնային" class="level4">
<h4 class="anchored" data-anchor-id="տնային">🏡 Տնային</h4>
</section>
</section>
<section id="pydantic-tutorial" class="level1">
<h1>📚 Pydantic Tutorial</h1>
<section id="what-is-pydantic" class="level2">
<h2 class="anchored" data-anchor-id="what-is-pydantic">What is Pydantic?</h2>
<p><strong>Pydantic</strong> is a Python library that provides data validation and settings management using Python type annotations. It’s designed to make data validation simple, fast, and reliable.</p>
<section id="key-features" class="level3">
<h3 class="anchored" data-anchor-id="key-features">Key Features:</h3>
<ul>
<li><strong>Type Safety</strong>: Uses Python type hints for validation</li>
<li><strong>Fast</strong>: Written in Rust (v2) for performance</li>
<li><strong>Easy to Use</strong>: Intuitive API design</li>
<li><strong>Comprehensive</strong>: Supports complex data structures</li>
<li><strong>Integration</strong>: Works seamlessly with FastAPI</li>
</ul>
</section>
<section id="why-use-pydantic" class="level3">
<h3 class="anchored" data-anchor-id="why-use-pydantic">Why Use Pydantic?</h3>
<ol type="1">
<li><strong>Data Validation</strong>: Automatically validates input data</li>
<li><strong>Type Conversion</strong>: Converts compatible types automatically</li>
<li><strong>Error Handling</strong>: Provides detailed error messages</li>
<li><strong>Documentation</strong>: Auto-generates JSON schemas</li>
<li><strong>IDE Support</strong>: Full type checking and autocomplete</li>
</ol>
</section>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pydantic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For email validation and other extras:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install pydantic<span class="pp">[</span><span class="ss">email</span><span class="pp">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Reminder - <a href="../python/17_dataclass_iterator_generator_context_manager.html">dataclasses</a></p>
<ul>
<li><a href="https://docs.pydantic.dev/latest/">docs</a></li>
<li><a href="https://www.youtube.com/watch?v=Vj-iU-8_xLs">16 minute video by ArjanCodes</a></li>
<li><a href="https://www.youtube.com/watch?v=vCLetdhswMg">10 minute video comparing different data classes by mCoding</a></li>
</ul>
<div id="cell-8" class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install pydantic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="basic-pydantic-models" class="level2">
<h2 class="anchored" data-anchor-id="basic-pydantic-models">Basic Pydantic Models</h2>
<p>A Pydantic model is a class that inherits from <code>BaseModel</code>. All attributes are defined with type annotations.</p>
<div id="cell-11" class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>user_data <span class="op">=</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"id"</span>: <span class="dv">1</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"name"</span>: <span class="st">"Faylo Bobol"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"email"</span>: <span class="st">"faylo@bolol.am"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"age"</span>: <span class="dv">30</span>, <span class="co"># optional</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># is_active default = True</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-12" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic Pydantic Model</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User(BaseModel):</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    is_active: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> User(<span class="op">**</span>user_data) <span class="co"># User(id=user_data["id"])</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(user)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"User name: </span><span class="sc">{</span>user<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"User email: </span><span class="sc">{</span>user<span class="sc">.</span>email<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>id=1 name='Faylo Bobol' email='faylo@bolol.am' age=30 is_active=True
User name: Faylo Bobol
User email: faylo@bolol.am</code></pre>
</div>
</div>
<div id="cell-13" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to dictionary</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">As dictionary:"</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(user.model_dump())</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to JSON</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">As JSON:"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(user.model_dump_json(indent<span class="op">=</span><span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
As dictionary:
{'id': 1, 'name': 'Faylo Bobol', 'email': 'faylo@bolol.am', 'age': 30, 'is_active': True}

As JSON:
{
    "id": 1,
    "name": "Faylo Bobol",
    "email": "faylo@bolol.am",
    "age": 30,
    "is_active": true
}</code></pre>
</div>
</div>
<div id="cell-14" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(user.model_dump(include<span class="op">=</span>{<span class="st">"id"</span>, <span class="st">"name"</span>}))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(user.model_dump(exclude<span class="op">=</span>{<span class="st">"id"</span>, <span class="st">"name"</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'id': 1, 'name': 'Faylo Bobol'}
{'email': 'faylo@bolol.am', 'age': 30, 'is_active': True}</code></pre>
</div>
</div>
</section>
<section id="data-validation" class="level2">
<h2 class="anchored" data-anchor-id="data-validation">Data Validation</h2>
<p>Pydantic automatically validates data types and provides helpful error messages.</p>
<div id="cell-16" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Type conversion - Pydantic tries to convert compatible types</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Type Conversion ==="</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>user_flexible <span class="op">=</span> User(<span class="bu">id</span><span class="op">=</span><span class="st">"123"</span>, </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                     name<span class="op">=</span><span class="st">"Barxudarum"</span>, </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                     email<span class="op">=</span><span class="st">"barxudarum@panir.com"</span>, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                     age<span class="op">=</span><span class="st">"25"</span>)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"ID (converted from string): </span><span class="sc">{</span>user_flexible<span class="sc">.</span><span class="bu">id</span><span class="sc">}</span><span class="ss"> (type: </span><span class="sc">{</span><span class="bu">type</span>(user_flexible.<span class="bu">id</span>)<span class="sc">}</span><span class="ss">)"</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Age (converted from string): </span><span class="sc">{</span>user_flexible<span class="sc">.</span>age<span class="sc">}</span><span class="ss"> (type: </span><span class="sc">{</span><span class="bu">type</span>(user_flexible.age)<span class="sc">}</span><span class="ss">)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Type Conversion ===
ID (converted from string): 123 (type: &lt;class 'int'&gt;)
Age (converted from string): 25 (type: &lt;class 'int'&gt;)</code></pre>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>invalid_user <span class="op">=</span> User(<span class="bu">id</span><span class="op">=</span><span class="st">"not_a_number"</span>, name<span class="op">=</span><span class="st">"Spiridon"</span>, email<span class="op">=</span><span class="st">"tervigen@xunk.am"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValidationError</span>                           Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[42], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> invalid_user <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">User</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">id</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">not_a_number</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">name</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">Spiridon</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">email</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">tervigen@xunk.am</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg ansi-bold">c:\Users\hayk_\.conda\envs\sl\lib\site-packages\pydantic\main.py:253</span>, in <span class="ansi-cyan-fg">BaseModel.__init__</span><span class="ansi-blue-fg ansi-bold">(self, **data)</span>
<span class="ansi-green-fg">    251</span> <span style="font-style:italic;color:rgb(95,135,135)"># `__tracebackhide__` tells pytest and some other tools to omit this function from tracebacks</span>
<span class="ansi-green-fg">    252</span> __tracebackhide__ <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>
<span class="ansi-green-fg ansi-bold">--&gt; 253</span> validated_self <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__pydantic_validator__</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">validate_python</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">self_instance</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    254</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> validated_self:
<span class="ansi-green-fg">    255</span>     warnings<span style="color:rgb(98,98,98)">.</span>warn(
<span class="ansi-green-fg">    256</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">A custom validator is returning a value other than `self`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">'</span>
<span class="ansi-green-fg">    257</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Returning anything other than `self` from a top level model validator isn</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t supported when validating via `__init__`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    258</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">See the `model_validator` docs (https://docs.pydantic.dev/latest/concepts/validators/#model-validators) for more details.</span><span style="color:rgb(175,0,0)">'</span>,
<span class="ansi-green-fg">    259</span>         stacklevel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">2</span>,
<span class="ansi-green-fg">    260</span>     )

<span class="ansi-red-fg ansi-bold">ValidationError</span>: 1 validation error for User
id
  Input should be a valid integer, unable to parse string as an integer [type=int_parsing, input_value='not_a_number', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/int_parsing</pre>
</div>
</div>
</div>
<div id="cell-18" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>less_data <span class="op">=</span> User(<span class="bu">id</span><span class="op">=</span><span class="dv">509</span>, email<span class="op">=</span><span class="st">"tervigen@xunk.am"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValidationError</span>                           Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[43], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> less_data <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">User</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">id</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">509</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">email</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">tervigen@xunk.am</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">)</span>

File <span class="ansi-green-fg ansi-bold">c:\Users\hayk_\.conda\envs\sl\lib\site-packages\pydantic\main.py:253</span>, in <span class="ansi-cyan-fg">BaseModel.__init__</span><span class="ansi-blue-fg ansi-bold">(self, **data)</span>
<span class="ansi-green-fg">    251</span> <span style="font-style:italic;color:rgb(95,135,135)"># `__tracebackhide__` tells pytest and some other tools to omit this function from tracebacks</span>
<span class="ansi-green-fg">    252</span> __tracebackhide__ <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>
<span class="ansi-green-fg ansi-bold">--&gt; 253</span> validated_self <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__pydantic_validator__</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">validate_python</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">self_instance</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    254</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> validated_self:
<span class="ansi-green-fg">    255</span>     warnings<span style="color:rgb(98,98,98)">.</span>warn(
<span class="ansi-green-fg">    256</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">A custom validator is returning a value other than `self`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">'</span>
<span class="ansi-green-fg">    257</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Returning anything other than `self` from a top level model validator isn</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t supported when validating via `__init__`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    258</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">See the `model_validator` docs (https://docs.pydantic.dev/latest/concepts/validators/#model-validators) for more details.</span><span style="color:rgb(175,0,0)">'</span>,
<span class="ansi-green-fg">    259</span>         stacklevel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">2</span>,
<span class="ansi-green-fg">    260</span>     )

<span class="ansi-red-fg ansi-bold">ValidationError</span>: 1 validation error for User
name
  Field required [type=missing, input_value={'id': 509, 'email': 'tervigen@xunk.am'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing</pre>
</div>
</div>
</div>
</section>
<section id="field-constraints-and-custom-validators" class="level2">
<h2 class="anchored" data-anchor-id="field-constraints-and-custom-validators">Field Constraints and Custom Validators</h2>
<p>Pydantic provides Field constraints and custom validators for more sophisticated validation.</p>
<div id="cell-20" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Advanced model with Field constraints and custom validators</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> Field</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AdvancedUser(BaseModel):</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span> <span class="op">=</span> Field(gt<span class="op">=</span><span class="dv">0</span>, description<span class="op">=</span><span class="st">"User ID must be positive"</span>) <span class="co"># greater than</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    username: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">3</span>, max_length<span class="op">=</span><span class="dv">20</span>, description<span class="op">=</span><span class="st">"Username between 3-20 characters"</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Valid email address"</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>] <span class="op">=</span> Field(default<span class="op">=</span><span class="va">None</span>, ge<span class="op">=</span><span class="dv">0</span>, le<span class="op">=</span><span class="dv">100</span>, description<span class="op">=</span><span class="st">"Age between 0-100"</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    password: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">8</span>, description<span class="op">=</span><span class="st">"Password minimum 8 characters"</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    confirm_password: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Password confirmation"</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    full_name: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Full name"</span>)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    created_at: datetime <span class="op">=</span> Field(default_factory<span class="op">=</span>datetime.now)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-21" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>advanced_user <span class="op">=</span> AdvancedUser(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    username<span class="op">=</span><span class="st">"Faylo509"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span><span class="st">"panir@hamov.am"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    age<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    confirm_password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    full_name<span class="op">=</span><span class="st">"Faylo Bobolyan"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✅ User created successfully!"</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(advanced_user.model_dump(exclude<span class="op">=</span>{<span class="st">'password'</span>, <span class="st">'confirm_password'</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ User created successfully!
{'id': 1, 'username': 'Faylo509', 'email': 'panir@hamov.am', 'age': 25, 'full_name': 'Faylo Bobolyan', 'created_at': datetime.datetime(2025, 8, 13, 18, 25, 25, 638385)}</code></pre>
</div>
</div>
<div id="cell-22" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>advanced_user <span class="op">=</span> AdvancedUser(</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=-</span><span class="dv">3</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    username<span class="op">=</span><span class="st">"Faylo509"</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span><span class="st">"panir@hamov.am"</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    age<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    confirm_password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    full_name<span class="op">=</span><span class="st">"Faylo Bobolyan"</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"✅ User created successfully!"</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(advanced_user.model_dump(exclude<span class="op">=</span>{<span class="st">'password'</span>, <span class="st">'confirm_password'</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValidationError</span>                           Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[46], line 1</span>
<span class="ansi-green-fg ansi-bold">----&gt; 1</span> advanced_user <span style="color:rgb(98,98,98)">=</span> <span class="ansi-yellow-bg">AdvancedUser</span><span class="ansi-yellow-bg">(</span>
<span class="ansi-green-fg">      2</span> <span class="ansi-yellow-bg">    </span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">id</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">-</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">3</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      3</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">username</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">Faylo509</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      4</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">email</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">panir@hamov.am</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      5</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">age</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">25</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      6</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">password</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">hndkahav</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      7</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">confirm_password</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">hndkahav</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">,</span>
<span class="ansi-green-fg">      8</span> <span class="ansi-yellow-bg">    </span><span class="ansi-yellow-bg">full_name</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">Faylo Bobolyan</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span>
<span class="ansi-green-fg">      9</span> <span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">     10</span> <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">✅ User created successfully!</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">     11</span> <span style="color:rgb(0,135,0)">print</span>(advanced_user<span style="color:rgb(98,98,98)">.</span>model_dump(exclude<span style="color:rgb(98,98,98)">=</span>{<span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">password</span><span style="color:rgb(175,0,0)">'</span>, <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">confirm_password</span><span style="color:rgb(175,0,0)">'</span>}))

File <span class="ansi-green-fg ansi-bold">c:\Users\hayk_\.conda\envs\sl\lib\site-packages\pydantic\main.py:253</span>, in <span class="ansi-cyan-fg">BaseModel.__init__</span><span class="ansi-blue-fg ansi-bold">(self, **data)</span>
<span class="ansi-green-fg">    251</span> <span style="font-style:italic;color:rgb(95,135,135)"># `__tracebackhide__` tells pytest and some other tools to omit this function from tracebacks</span>
<span class="ansi-green-fg">    252</span> __tracebackhide__ <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>
<span class="ansi-green-fg ansi-bold">--&gt; 253</span> validated_self <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__pydantic_validator__</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">validate_python</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">self_instance</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    254</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> validated_self:
<span class="ansi-green-fg">    255</span>     warnings<span style="color:rgb(98,98,98)">.</span>warn(
<span class="ansi-green-fg">    256</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">A custom validator is returning a value other than `self`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">'</span>
<span class="ansi-green-fg">    257</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Returning anything other than `self` from a top level model validator isn</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t supported when validating via `__init__`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    258</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">See the `model_validator` docs (https://docs.pydantic.dev/latest/concepts/validators/#model-validators) for more details.</span><span style="color:rgb(175,0,0)">'</span>,
<span class="ansi-green-fg">    259</span>         stacklevel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">2</span>,
<span class="ansi-green-fg">    260</span>     )

<span class="ansi-red-fg ansi-bold">ValidationError</span>: 1 validation error for AdvancedUser
id
  Input should be greater than 0 [type=greater_than, input_value=-3, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/greater_than</pre>
</div>
</div>
</div>
<div id="cell-23" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> ValidationError</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    advanced_user <span class="op">=</span> AdvancedUser(</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=-</span><span class="dv">3</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    username<span class="op">=</span><span class="st">"Faylo509"</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span><span class="st">"panir@hamov.am"</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    age<span class="op">=</span><span class="dv">123</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    password<span class="op">=</span><span class="st">"hndk"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    confirm_password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    full_name<span class="op">=</span><span class="st">"Faylo Bobolyan"</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> ValidationError <span class="im">as</span> e:</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"❌ Validation failed:"</span>)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> error <span class="kw">in</span> e.errors():</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>error[<span class="st">'loc'</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>error[<span class="st">'msg'</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>❌ Validation failed:
  ('id',): Input should be greater than 0
  ('age',): Input should be less than or equal to 100
  ('password',): String should have at least 8 characters</code></pre>
</div>
</div>
<section id="custom-validators" class="level3">
<h3 class="anchored" data-anchor-id="custom-validators">Custom validators</h3>
<div id="cell-25" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re <span class="co"># regular expresstion</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> field_validator, model_validator</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AdvancedUser(BaseModel):</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span> <span class="op">=</span> Field(gt<span class="op">=</span><span class="dv">0</span>, description<span class="op">=</span><span class="st">"User ID must be positive"</span>) <span class="co"># greater than</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    username: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">3</span>, max_length<span class="op">=</span><span class="dv">20</span>, description<span class="op">=</span><span class="st">"Username between 3-20 characters"</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Valid email address"</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>] <span class="op">=</span> Field(default<span class="op">=</span><span class="va">None</span>, ge<span class="op">=</span><span class="dv">0</span>, le<span class="op">=</span><span class="dv">100</span>, description<span class="op">=</span><span class="st">"Age between 0-100"</span>)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    password: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">8</span>, description<span class="op">=</span><span class="st">"Password minimum 8 characters"</span>)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    confirm_password: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Password confirmation"</span>)</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    full_name: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Full name"</span>)</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># https://stackoverflow.com/questions/76972389/fastapi-pydantic-how-to-validate-email</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">@field_validator</span>(<span class="st">'email'</span>) </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> validate_email(cls, v):</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Simple email validation</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>        pattern <span class="op">=</span> <span class="vs">r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'</span></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> re.match(pattern, v):</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Invalid email format'</span>)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> v</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">@field_validator</span>(<span class="st">'username'</span>)</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> validate_username(cls, v):</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> v.isalnum():</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Username must be alphanumeric'</span>)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> v</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">@field_validator</span>(<span class="st">'password'</span>)</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> validate_password(cls, v):</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="bu">any</span>(c.isupper() <span class="cf">for</span> c <span class="kw">in</span> v):</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Password must contain at least one uppercase letter'</span>)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="bu">any</span>(c.islower() <span class="cf">for</span> c <span class="kw">in</span> v):</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Password must contain at least one lowercase letter'</span>)</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> <span class="bu">any</span>(c.isdigit() <span class="cf">for</span> c <span class="kw">in</span> v):</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Password must contain at least one digit'</span>)</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> v</span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># # Validate that passwords match, after setting the values</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">@model_validator</span>(mode<span class="op">=</span><span class="st">'after'</span>)</span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> validate_passwords_match(<span class="va">self</span>):</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.password <span class="op">!=</span> <span class="va">self</span>.confirm_password:</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="st">'Passwords do not match'</span>)</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-26" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    advanced_user <span class="op">=</span> AdvancedUser(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    username<span class="op">=</span><span class="st">"Faylo509"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span><span class="st">"panir@hamov.am"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    age<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    password<span class="op">=</span><span class="st">"Sovorakan_hav509"</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    confirm_password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    full_name<span class="op">=</span><span class="st">"Faylo Bobolyan"</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> ValidationError <span class="im">as</span> e:</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"❌ Validation failed:"</span>)</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> error <span class="kw">in</span> e.errors():</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>error[<span class="st">'loc'</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>error[<span class="st">'msg'</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>❌ Validation failed:
  (): Value error, Passwords do not match</code></pre>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    advanced_user <span class="op">=</span> AdvancedUser(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    username<span class="op">=</span><span class="st">"Faylo509"</span>,</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span><span class="st">"panir@hamov.am"</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    age<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    password<span class="op">=</span><span class="st">"Sovorakan_hav509"</span>,</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    confirm_password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    full_name<span class="op">=</span><span class="st">"Faylo Bobolyan"</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> ValidationError <span class="im">as</span> e:</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"❌ Validation failed:"</span>)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> error <span class="kw">in</span> e.errors():</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>error[<span class="st">'loc'</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>error[<span class="st">'msg'</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>❌ Validation failed:
  (): Value error, Passwords do not match</code></pre>
</div>
</div>
</section>
</section>
<section id="config" class="level2">
<h2 class="anchored" data-anchor-id="config">Config</h2>
<p>https://docs.pydantic.dev/latest/api/config/</p>
<div id="cell-29" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> AdvancedUser(BaseModel):</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span> <span class="op">=</span> Field(gt<span class="op">=</span><span class="dv">0</span>, description<span class="op">=</span><span class="st">"User ID must be positive"</span>) <span class="co"># greater than</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    username: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">3</span>, max_length<span class="op">=</span><span class="dv">20</span>, description<span class="op">=</span><span class="st">"Username between 3-20 characters"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Valid email address"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>] <span class="op">=</span> Field(default<span class="op">=</span><span class="va">None</span>, ge<span class="op">=</span><span class="dv">0</span>, le<span class="op">=</span><span class="dv">100</span>, description<span class="op">=</span><span class="st">"Age between 0-100"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    password: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">8</span>, description<span class="op">=</span><span class="st">"Password minimum 8 characters"</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    confirm_password: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Password confirmation"</span>)</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    full_name: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Full name"</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> Config: <span class="co"># https://docs.pydantic.dev/latest/api/config/</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        str_to_upper <span class="op">=</span> <span class="va">True</span>  </span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>        <span class="co"># frozen = True      </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-30" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>advanced_user <span class="op">=</span> AdvancedUser(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span><span class="op">=</span><span class="dv">3</span>,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    username<span class="op">=</span><span class="st">"Faylo509"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    email<span class="op">=</span><span class="st">"panir@hamov.am"</span>,</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    age<span class="op">=</span><span class="dv">25</span>,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    password<span class="op">=</span><span class="st">"Sovorakan_hav509"</span>,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    confirm_password<span class="op">=</span><span class="st">"hndkahav"</span>,</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    full_name<span class="op">=</span><span class="st">"Faylo Bobolyan"</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(advanced_user)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>advanced_user.<span class="bu">id</span> <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(advanced_user)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>id=3 username='FAYLO509' email='PANIR@HAMOV.AM' age=25 password='SOVORAKAN_HAV509' confirm_password='HNDKAHAV' full_name='FAYLO BOBOLYAN'
id=10 username='FAYLO509' email='PANIR@HAMOV.AM' age=25 password='SOVORAKAN_HAV509' confirm_password='HNDKAHAV' full_name='FAYLO BOBOLYAN'</code></pre>
</div>
</div>
</section>
<section id="json-schema" class="level2">
<h2 class="anchored" data-anchor-id="json-schema">Json Schema</h2>
<div id="cell-32" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>advanced_user.model_json_schema()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>{'properties': {'id': {'description': 'User ID must be positive',
   'exclusiveMinimum': 0,
   'title': 'Id',
   'type': 'integer'},
  'username': {'description': 'Username between 3-20 characters',
   'maxLength': 20,
   'minLength': 3,
   'title': 'Username',
   'type': 'string'},
  'email': {'description': 'Valid email address',
   'title': 'Email',
   'type': 'string'},
  'age': {'anyOf': [{'maximum': 100, 'minimum': 0, 'type': 'integer'},
    {'type': 'null'}],
   'default': None,
   'description': 'Age between 0-100',
   'title': 'Age'},
  'password': {'description': 'Password minimum 8 characters',
   'minLength': 8,
   'title': 'Password',
   'type': 'string'},
  'confirm_password': {'description': 'Password confirmation',
   'title': 'Confirm Password',
   'type': 'string'},
  'full_name': {'description': 'Full name',
   'title': 'Full Name',
   'type': 'string'}},
 'required': ['id',
  'username',
  'email',
  'password',
  'confirm_password',
  'full_name'],
 'title': 'AdvancedUser',
 'type': 'object'}</code></pre>
</div>
</div>
</section>
<section id="enum" class="level2">
<h2 class="anchored" data-anchor-id="enum">Enum</h2>
<p>An Enum (Enumeration) is a way to create a set of symbolic names bound to unique, constant values. It provides a structured way to define a collection of related constants.</p>
<p><a href="https://www.geeksforgeeks.org/python/enum-in-python/">geeksforgeeks</a></p>
<div id="cell-34" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> enum <span class="im">import</span> Enum</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic Enum example</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserRole(<span class="bu">str</span>, Enum):</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    ADMIN <span class="op">=</span> <span class="st">"admin"</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    USER <span class="op">=</span> <span class="st">"user"</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    MODERATOR <span class="op">=</span> <span class="st">"moderator"</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>role <span class="op">=</span> UserRole.ADMIN</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(role)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Role: </span><span class="sc">{</span>role<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># Role: admin</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Role value: </span><span class="sc">{</span>role<span class="sc">.</span>value<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># Role value: admin</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Role name: </span><span class="sc">{</span>role<span class="sc">.</span>name<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># Role name: ADMIN</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="co"># # You can iterate over enum values</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">All roles:"</span>)</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> role <span class="kw">in</span> UserRole:</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>role<span class="sc">.</span>name<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>role<span class="sc">.</span>value<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>UserRole.ADMIN
Role: admin
Role value: admin
Role name: ADMIN

All roles:
  ADMIN: admin
  USER: user
  MODERATOR: moderator</code></pre>
</div>
</div>
<section id="why-enum" class="level3">
<h3 class="anchored" data-anchor-id="why-enum">Why enum?</h3>
<ol type="1">
<li>Type Safety and Validation</li>
</ol>
<div id="cell-37" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Without Enum - prone to errors</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> check_user_permission(role: <span class="bu">str</span>):</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> role <span class="op">==</span> <span class="st">"admin"</span>:  <span class="co"># Typo risk: "admni", "Admin", etc.</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Full access"</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> role <span class="op">==</span> <span class="st">"user"</span>:</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Limited access"</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"No access"</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># With Enum - type safe</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> check_user_permission_safe(role: UserRole):</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> role <span class="op">==</span> UserRole.ADMIN:  <span class="co"># IDE autocomplete, no typos</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Full access"</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> role <span class="op">==</span> UserRole.USER:</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"Limited access"</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">"No access"</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Demonstration</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Type Safety Demo ==="</span>)</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co"># print(f"{check_user_permission('admni') = }", "(Typo, but no error!)")</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>check_user_permission_safe(UserRole.ADMIN) <span class="op">=</span> <span class="sc">}</span><span class="ss">"</span>, <span class="st">"(Safe!)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Type Safety Demo ===
check_user_permission_safe(UserRole.ADMIN) = 'Full access' (Safe!)</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Centralized Constants</li>
</ol>
<div id="cell-39" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> User(BaseModel):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    role: <span class="bu">str</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    status: <span class="bu">str</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> User(role<span class="op">=</span><span class="st">"admin"</span>, status<span class="op">=</span><span class="st">"active"</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Bad: Magic strings scattered throughout code</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> user.role <span class="op">==</span> <span class="st">"admin"</span>:  <span class="co"># Magic string</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> user.status <span class="op">==</span> <span class="st">"active"</span>:  <span class="co"># Another magic string</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Good: Centralized in Enum</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserStatus(<span class="bu">str</span>, Enum):</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    ACTIVE <span class="op">=</span> <span class="st">"active"</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    INACTIVE <span class="op">=</span> <span class="st">"inactive"</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    SUSPENDED <span class="op">=</span> <span class="st">"suspended"</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> user.role <span class="op">==</span> UserRole.ADMIN:  <span class="co"># Clear, centralized</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> user.status <span class="op">==</span> UserStatus.ACTIVE:  <span class="co"># Clear, centralized</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>IDE Support and Autocomplete</li>
</ol>
<div id="cell-41" class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With Enum, your IDE provides:</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - Autocomplete for UserRole.</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># - Error detection for invalid values</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Refactoring support</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>role <span class="op">=</span> UserRole.  <span class="co"># IDE shows: ADMIN, USER, MODERATOR</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="enum-vs-typing.literal" class="level3">
<h3 class="anchored" data-anchor-id="enum-vs-typing.literal">Enum vs typing.Literal</h3>
<div id="cell-43" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Literal</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Literal</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_with_literal(status: Literal[<span class="st">"pending"</span>, <span class="st">"approved"</span>, <span class="st">"rejected"</span>]):</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Processing </span><span class="sc">{</span>status<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Using Enum</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Status(<span class="bu">str</span>, Enum):</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    PENDING <span class="op">=</span> <span class="st">"pending"</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    APPROVED <span class="op">=</span> <span class="st">"approved"</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    REJECTED <span class="op">=</span> <span class="st">"rejected"</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_with_enum(status: Status):</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Processing </span><span class="sc">{</span>status<span class="sc">.</span>value<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-44" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Runtime Validation</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_literal(value: Literal[<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>]):</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># No runtime validation - any string can be passed</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_enum(value: Status):</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Runtime validation when creating enum instance</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> value</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Runtime Validation ==="</span>)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test_literal(<span class="st">"invalid"</span>))  <span class="co"># No error!</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test_enum(Status(<span class="st">"invalid"</span>)))  <span class="co"># Will raise ValueError</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== Runtime Validation ===
invalid</code></pre>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValueError</span>                                Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[78], line 13</span>
<span class="ansi-green-fg">     10</span> <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">=== Runtime Validation ===</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">     11</span> <span style="color:rgb(0,135,0)">print</span>(test_literal(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">invalid</span><span style="color:rgb(175,0,0)">"</span>))  <span style="font-style:italic;color:rgb(95,135,135)"># No error!</span>
<span class="ansi-green-fg ansi-bold">---&gt; 13</span> <span style="color:rgb(0,135,0)">print</span>(test_enum(<span class="ansi-yellow-bg">Status</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">invalid</span><span style="color:rgb(175,0,0)" class="ansi-yellow-bg">"</span><span class="ansi-yellow-bg">)</span>))  <span style="font-style:italic;color:rgb(95,135,135)"># Will raise ValueError</span>

File <span class="ansi-green-fg ansi-bold">c:\Users\hayk_\.conda\envs\sl\lib\enum.py:385</span>, in <span class="ansi-cyan-fg">EnumMeta.__call__</span><span class="ansi-blue-fg ansi-bold">(cls, value, names, module, qualname, type, start)</span>
<span class="ansi-green-fg">    360</span> <span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg">    361</span> <span style="font-style:italic;color:rgb(175,0,0)">Either returns an existing member, or creates a new enum class.</span>
<span class="ansi-green-fg">    362</span> 
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    382</span> <span style="font-style:italic;color:rgb(175,0,0)">`type`, if set, will be mixed in as the first base class.</span>
<span class="ansi-green-fg">    383</span> <span style="font-style:italic;color:rgb(175,0,0)">"""</span>
<span class="ansi-green-fg">    384</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> names <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:  <span style="font-style:italic;color:rgb(95,135,135)"># simple value lookup</span>
<span class="ansi-green-fg ansi-bold">--&gt; 385</span>     <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">cls</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span style="color:rgb(0,0,255)" class="ansi-yellow-bg">__new__</span><span class="ansi-yellow-bg">(</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">cls</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">value</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    386</span> <span style="font-style:italic;color:rgb(95,135,135)"># otherwise, functional API: we're creating a new Enum type</span>
<span class="ansi-green-fg">    387</span> <span style="font-weight:bold;color:rgb(0,135,0)">return</span> <span style="color:rgb(0,135,0)">cls</span><span style="color:rgb(98,98,98)">.</span>_create_(
<span class="ansi-green-fg">    388</span>         value,
<span class="ansi-green-fg">    389</span>         names,
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">    393</span>         start<span style="color:rgb(98,98,98)">=</span>start,
<span class="ansi-green-fg">    394</span>         )

File <span class="ansi-green-fg ansi-bold">c:\Users\hayk_\.conda\envs\sl\lib\enum.py:710</span>, in <span class="ansi-cyan-fg">Enum.__new__</span><span class="ansi-blue-fg ansi-bold">(cls, value)</span>
<span class="ansi-green-fg">    708</span> ve_exc <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(215,95,95)">ValueError</span>(<span style="color:rgb(175,0,0)">"</span><span style="font-weight:bold;color:rgb(175,95,135)">%r</span><span style="color:rgb(175,0,0)"> is not a valid </span><span style="font-weight:bold;color:rgb(175,95,135)">%s</span><span style="color:rgb(175,0,0)">"</span> <span style="color:rgb(98,98,98)">%</span> (value, <span style="color:rgb(0,135,0)">cls</span><span style="color:rgb(98,98,98)">.</span><span style="color:rgb(0,0,135)">__qualname__</span>))
<span class="ansi-green-fg">    709</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> result <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span> <span style="font-weight:bold;color:rgb(175,0,255)">and</span> exc <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg ansi-bold">--&gt; 710</span>     <span style="font-weight:bold;color:rgb(0,135,0)">raise</span> ve_exc
<span class="ansi-green-fg">    711</span> <span style="font-weight:bold;color:rgb(0,135,0)">elif</span> exc <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(0,135,0)">None</span>:
<span class="ansi-green-fg">    712</span>     exc <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(215,95,95)">TypeError</span>(
<span class="ansi-green-fg">    713</span>             <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">error in </span><span style="font-weight:bold;color:rgb(175,95,135)">%s</span><span style="color:rgb(175,0,0)">._missing_: returned </span><span style="font-weight:bold;color:rgb(175,95,135)">%r</span><span style="color:rgb(175,0,0)"> instead of None or a valid member</span><span style="color:rgb(175,0,0)">'</span>
<span class="ansi-green-fg">    714</span>             <span style="color:rgb(98,98,98)">%</span> (<span style="color:rgb(0,135,0)">cls</span><span style="color:rgb(98,98,98)">.</span><span style="color:rgb(0,0,135)">__name__</span>, result)
<span class="ansi-green-fg">    715</span>             )

<span class="ansi-red-fg ansi-bold">ValueError</span>: 'invalid' is not a valid Status</pre>
</div>
</div>
</div>
<div id="cell-45" class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Iteration and Introspection</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== Iteration ==="</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Literal - cannot iterate</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># for item in Literal["a", "b", "c"]:  # Not possible</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Enum - can iterate</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> status <span class="kw">in</span> Status:</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Status: </span><span class="sc">{</span>status<span class="sc">.</span>name<span class="sc">}</span><span class="ss"> = </span><span class="sc">{</span>status<span class="sc">.</span>value<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== Iteration ===
Status: PENDING = pending
Status: APPROVED = approved
Status: REJECTED = rejected</code></pre>
</div>
</div>
<div id="cell-46" class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Extensibility</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ExtendedStatus(<span class="bu">str</span>, Enum):</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    PENDING <span class="op">=</span> <span class="st">"pending"</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    APPROVED <span class="op">=</span> <span class="st">"approved"</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    REJECTED <span class="op">=</span> <span class="st">"rejected"</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> is_final(<span class="va">self</span>) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Check if status is final (approved or rejected)"""</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span> <span class="kw">in</span> (<span class="va">self</span>.APPROVED, <span class="va">self</span>.REJECTED)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">@classmethod</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_initial_status(cls):</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Get the initial status for new items"""</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> cls.PENDING</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>status <span class="op">=</span> ExtendedStatus.PENDING</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"=== Extended Methods ==="</span>)</span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Is </span><span class="sc">{</span>status<span class="sc">.</span>value<span class="sc">}</span><span class="ss"> final? </span><span class="sc">{</span>status<span class="sc">.</span>is_final()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Initial status: </span><span class="sc">{</span>ExtendedStatus<span class="sc">.</span>get_initial_status()<span class="sc">.</span>value<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== Extended Methods ===
Is pending final? False
Initial status: pending</code></pre>
</div>
</div>
</section>
<section id="enums-with-pydantic" class="level3">
<h3 class="anchored" data-anchor-id="enums-with-pydantic">Enums with Pydantic</h3>
<div id="cell-48" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> enum <span class="im">import</span> Enum</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, ValidationError</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserRole(<span class="bu">str</span>, Enum):</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    ADMIN <span class="op">=</span> <span class="st">"admin"</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    USER <span class="op">=</span> <span class="st">"user"</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    MODERATOR <span class="op">=</span> <span class="st">"moderator"</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    role <span class="op">=</span> UserRole(<span class="st">"panir"</span>)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">ValueError</span> <span class="im">as</span> e:</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"❌ Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Correct usage:</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>role <span class="op">=</span> UserRole.MODERATOR</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"✅ Correct: </span><span class="sc">{</span>role<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>❌ Error: 'panir' is not a valid UserRole
✅ Correct: moderator</code></pre>
</div>
</div>
<div id="cell-49" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pydantic Model with Enum</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserWithRole(BaseModel):</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    role: UserRole</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Valid creation</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>user_with_role <span class="op">=</span> UserWithRole(<span class="bu">id</span><span class="op">=</span><span class="dv">1</span>, role<span class="op">=</span><span class="st">"admin"</span>, name<span class="op">=</span><span class="st">"Mavses"</span>) <span class="co"># hardcoded</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">=== Pydantic with Enum ==="</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"User: </span><span class="sc">{</span>user_with_role<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Role type: </span><span class="sc">{</span><span class="bu">type</span>(user_with_role.role)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Role value: </span><span class="sc">{</span>user_with_role<span class="sc">.</span>role<span class="sc">.</span>value<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="co"># # Pydantic automatically validates enum values</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>wrong_role <span class="op">=</span> <span class="st">"panir"</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    invalid_user <span class="op">=</span> UserWithRole(<span class="bu">id</span><span class="op">=</span><span class="dv">2</span>, role<span class="op">=</span>wrong_role, name<span class="op">=</span><span class="st">"Goro"</span>)</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> ValidationError <span class="im">as</span> e:</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">❌ Validation Error:"</span>)</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> error <span class="kw">in</span> e.errors():</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"  </span><span class="sc">{</span>error[<span class="st">'loc'</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>error[<span class="st">'msg'</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== Pydantic with Enum ===
User: id=1 role=&lt;UserRole.ADMIN: 'admin'&gt; name='Mavses'
Role type: &lt;enum 'UserRole'&gt;
Role value: admin

❌ Validation Error:
  ('role',): Input should be 'admin', 'user' or 'moderator'</code></pre>
</div>
</div>
<p>We can also make it so it exports the value instead of the enum object itself</p>
<div id="cell-51" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserWithRole(BaseModel):</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    role: UserRole</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># class Config:</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     use_enum_values = True</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> UserWithRole(<span class="bu">id</span><span class="op">=</span><span class="dv">509</span>, role<span class="op">=</span>UserRole.USER, name<span class="op">=</span><span class="st">"DVD Gugo"</span>)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>user.role</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<pre><code>&lt;UserRole.USER: 'user'&gt;</code></pre>
</div>
</div>
</section>
<section id="we-can-add-methods-to-enums" class="level3">
<h3 class="anchored" data-anchor-id="we-can-add-methods-to-enums">We can add methods to enums</h3>
<div id="cell-53" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Complex example with multiple enums</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Priority(<span class="bu">str</span>, Enum):</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    LOW <span class="op">=</span> <span class="st">"low"</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    MEDIUM <span class="op">=</span> <span class="st">"medium"</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    HIGH <span class="op">=</span> <span class="st">"high"</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    CRITICAL <span class="op">=</span> <span class="st">"critical"</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__lt__</span>(<span class="va">self</span>, other):</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Enable priority comparison"""</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        order <span class="op">=</span> {<span class="st">"low"</span>: <span class="dv">1</span>, <span class="st">"medium"</span>: <span class="dv">2</span>, <span class="st">"high"</span>: <span class="dv">3</span>, <span class="st">"critical"</span>: <span class="dv">4</span>}</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> order[<span class="va">self</span>.value] <span class="op">&lt;</span> order[other.value]</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> TaskStatus(<span class="bu">str</span>, Enum):</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    TODO <span class="op">=</span> <span class="st">"todo"</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    IN_PROGRESS <span class="op">=</span> <span class="st">"in_progress"</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    REVIEW <span class="op">=</span> <span class="st">"review"</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>    DONE <span class="op">=</span> <span class="st">"done"</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>    CANCELLED <span class="op">=</span> <span class="st">"cancelled"</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> can_transition_to(<span class="va">self</span>, new_status: <span class="st">'TaskStatus'</span>) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Define valid status transitions"""</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>        transitions <span class="op">=</span> {</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.TODO: [<span class="va">self</span>.IN_PROGRESS, <span class="va">self</span>.CANCELLED],</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.IN_PROGRESS: [<span class="va">self</span>.REVIEW, <span class="va">self</span>.CANCELLED],</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.REVIEW: [<span class="va">self</span>.DONE, <span class="va">self</span>.IN_PROGRESS],</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.DONE: [],</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.CANCELLED: [<span class="va">self</span>.TODO]</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> new_status <span class="kw">in</span> transitions.get(<span class="va">self</span>, [])</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-54" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Task(BaseModel):</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    title: <span class="bu">str</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    priority: Priority</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    status: TaskStatus <span class="op">=</span> TaskStatus.TODO</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> update_status(<span class="va">self</span>, new_status: TaskStatus) <span class="op">-&gt;</span> <span class="bu">bool</span>:</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""Update status with validation"""</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">self</span>.status.can_transition_to(new_status):</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.status <span class="op">=</span> new_status</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage example</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== Advanced Enum Example ==="</span>)</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>task <span class="op">=</span> Task(<span class="bu">id</span><span class="op">=</span><span class="dv">1</span>, title<span class="op">=</span><span class="st">"Fix bug"</span>, priority<span class="op">=</span>Priority.HIGH)</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Initial task: </span><span class="sc">{</span>task<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== Advanced Enum Example ===
Initial task: id=1 title='Fix bug' priority=&lt;Priority.HIGH: 'high'&gt; status=&lt;TaskStatus.TODO: 'todo'&gt;</code></pre>
</div>
</div>
<div id="cell-55" class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Valid transition</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> task.update_status(TaskStatus.IN_PROGRESS):</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"✅ Status updated: </span><span class="sc">{</span>task<span class="sc">.</span>status<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"❌ Invalid status transition"</span>)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Invalid transition</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> task.update_status(TaskStatus.DONE):</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"✅ Status updated: </span><span class="sc">{</span>task<span class="sc">.</span>status<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"❌ Invalid transition from IN_PROGRESS to DONE (must go through REVIEW)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✅ Status updated: in_progress
❌ Invalid transition from IN_PROGRESS to DONE (must go through REVIEW)</code></pre>
</div>
</div>
<div id="cell-56" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Priority comparison</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>high_priority <span class="op">=</span> Priority.HIGH</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>critical_priority <span class="op">=</span> Priority.CRITICAL</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Priority comparison:"</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"High &lt; Critical: </span><span class="sc">{</span>high_priority <span class="op">&lt;</span> critical_priority<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Priority comparison:
High &lt; Critical: True</code></pre>
</div>
</div>
<div id="cell-57" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co"># JSON serialization</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">JSON output: </span><span class="sc">{</span>task<span class="sc">.</span>model_dump_json(indent<span class="op">=</span><span class="dv">2</span>)<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
JSON output: {
  "id": 1,
  "title": "Fix bug",
  "priority": "high",
  "status": "in_progress"
}</code></pre>
</div>
</div>
</section>
</section>
<section id="complex-data-structures-and-nested-models" class="level2">
<h2 class="anchored" data-anchor-id="complex-data-structures-and-nested-models">Complex Data Structures and Nested Models</h2>
<p>Pydantic can handle complex nested structures, lists, and enums.</p>
<div id="cell-59" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> enum <span class="im">import</span> Enum</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> Optional</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel, Field</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserRole(<span class="bu">str</span>, Enum):</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    ADMIN <span class="op">=</span> <span class="st">"admin"</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    USER <span class="op">=</span> <span class="st">"user"</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Status(<span class="bu">str</span>, Enum):</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    ACTIVE <span class="op">=</span> <span class="st">"active"</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    INACTIVE <span class="op">=</span> <span class="st">"inactive"</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Simplified nested models</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Address(BaseModel):</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>    street: <span class="bu">str</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>    city: <span class="bu">str</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>    postal_code: <span class="bu">str</span> <span class="op">=</span> Field(pattern<span class="op">=</span><span class="vs">r'^\d</span><span class="sc">{5}</span><span class="vs">$'</span>)  <span class="co"># 5-digit ZIP</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Simplified complex user model</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ComplexUser(BaseModel):</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>    role: UserRole</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>    status: Status <span class="op">=</span> Status.ACTIVE</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>    address: Optional[Address] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>    created_at: datetime <span class="op">=</span> Field(default_factory<span class="op">=</span>datetime.now)</span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Example data</span></span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>user_data <span class="op">=</span> {</span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"id"</span>: <span class="dv">1</span>,</span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"role"</span>: <span class="st">"admin"</span>,</span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># no status -&gt; default</span></span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"address"</span>: {</span>
<span id="cb60-35"><a href="#cb60-35" aria-hidden="true" tabindex="-1"></a>        <span class="st">"street"</span>: <span class="st">"Padnijni Pskov"</span>,</span>
<span id="cb60-36"><a href="#cb60-36" aria-hidden="true" tabindex="-1"></a>        <span class="st">"city"</span>: <span class="st">"Hervashen"</span>,</span>
<span id="cb60-37"><a href="#cb60-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">"postal_code"</span>: <span class="st">"0031"</span></span>
<span id="cb60-38"><a href="#cb60-38" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb60-39"><a href="#cb60-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-40"><a href="#cb60-40" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb60-41"><a href="#cb60-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-42"><a href="#cb60-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Create complex user</span></span>
<span id="cb60-43"><a href="#cb60-43" aria-hidden="true" tabindex="-1"></a>user <span class="op">=</span> ComplexUser(<span class="op">**</span>user_data)</span>
<span id="cb60-44"><a href="#cb60-44" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== Complex User Created ==="</span>)</span>
<span id="cb60-45"><a href="#cb60-45" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Role: </span><span class="sc">{</span>user<span class="sc">.</span>role<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb60-46"><a href="#cb60-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Address: </span><span class="sc">{</span>user<span class="sc">.</span>address<span class="sc">.</span>street<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>user<span class="sc">.</span>address<span class="sc">.</span>city<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb60-47"><a href="#cb60-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-48"><a href="#cb60-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-49"><a href="#cb60-49" aria-hidden="true" tabindex="-1"></a><span class="co"># JSON output</span></span>
<span id="cb60-50"><a href="#cb60-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== JSON Representation ==="</span>)</span>
<span id="cb60-51"><a href="#cb60-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(user.model_dump_json(indent<span class="op">=</span><span class="dv">2</span>, exclude<span class="op">=</span>{<span class="st">'created_at'</span>}))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg ansi-bold">ValidationError</span>                           Traceback (most recent call last)
Cell <span class="ansi-green-fg ansi-bold">In[96], line 43</span>
<span class="ansi-green-fg">     30</span> user_data <span style="color:rgb(98,98,98)">=</span> {
<span class="ansi-green-fg">     31</span>     <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">id</span><span style="color:rgb(175,0,0)">"</span>: <span style="color:rgb(98,98,98)">1</span>,
<span class="ansi-green-fg">     32</span>     <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">role</span><span style="color:rgb(175,0,0)">"</span>: <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">admin</span><span style="color:rgb(175,0,0)">"</span>,
<span class="ansi-green-fg ansi-bold">   (...)</span>
<span class="ansi-green-fg">     39</span>     
<span class="ansi-green-fg">     40</span> }
<span class="ansi-green-fg">     42</span> <span style="font-style:italic;color:rgb(95,135,135)"># Create complex user</span>
<span class="ansi-green-fg ansi-bold">---&gt; 43</span> user <span style="color:rgb(98,98,98)">=</span> ComplexUser(<span style="color:rgb(98,98,98)">*</span><span style="color:rgb(98,98,98)">*</span>user_data)
<span class="ansi-green-fg">     44</span> <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">=== Complex User Created ===</span><span style="color:rgb(175,0,0)">"</span>)
<span class="ansi-green-fg">     45</span> <span style="color:rgb(0,135,0)">print</span>(<span style="color:rgb(175,0,0)">f</span><span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Role: </span><span style="font-weight:bold;color:rgb(175,95,135)">{</span>user<span style="color:rgb(98,98,98)">.</span>role<span style="font-weight:bold;color:rgb(175,95,135)">}</span><span style="color:rgb(175,0,0)">"</span>)

File <span class="ansi-green-fg ansi-bold">c:\Users\hayk_\.conda\envs\sl\lib\site-packages\pydantic\main.py:253</span>, in <span class="ansi-cyan-fg">BaseModel.__init__</span><span class="ansi-blue-fg ansi-bold">(self, **data)</span>
<span class="ansi-green-fg">    251</span> <span style="font-style:italic;color:rgb(95,135,135)"># `__tracebackhide__` tells pytest and some other tools to omit this function from tracebacks</span>
<span class="ansi-green-fg">    252</span> __tracebackhide__ <span style="color:rgb(98,98,98)">=</span> <span style="font-weight:bold;color:rgb(0,135,0)">True</span>
<span class="ansi-green-fg ansi-bold">--&gt; 253</span> validated_self <span style="color:rgb(98,98,98)">=</span> <span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">__pydantic_validator__</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">.</span><span class="ansi-yellow-bg">validate_python</span><span class="ansi-yellow-bg">(</span><span class="ansi-yellow-bg">data</span><span class="ansi-yellow-bg">,</span><span class="ansi-yellow-bg"> </span><span class="ansi-yellow-bg">self_instance</span><span style="color:rgb(98,98,98)" class="ansi-yellow-bg">=</span><span style="color:rgb(0,135,0)" class="ansi-yellow-bg">self</span><span class="ansi-yellow-bg">)</span>
<span class="ansi-green-fg">    254</span> <span style="font-weight:bold;color:rgb(0,135,0)">if</span> <span style="color:rgb(0,135,0)">self</span> <span style="font-weight:bold;color:rgb(175,0,255)">is</span> <span style="font-weight:bold;color:rgb(175,0,255)">not</span> validated_self:
<span class="ansi-green-fg">    255</span>     warnings<span style="color:rgb(98,98,98)">.</span>warn(
<span class="ansi-green-fg">    256</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">A custom validator is returning a value other than `self`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">'</span>
<span class="ansi-green-fg">    257</span>         <span style="color:rgb(175,0,0)">"</span><span style="color:rgb(175,0,0)">Returning anything other than `self` from a top level model validator isn</span><span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">t supported when validating via `__init__`.</span><span style="font-weight:bold;color:rgb(175,95,0)">\n</span><span style="color:rgb(175,0,0)">"</span>
<span class="ansi-green-fg">    258</span>         <span style="color:rgb(175,0,0)">'</span><span style="color:rgb(175,0,0)">See the `model_validator` docs (https://docs.pydantic.dev/latest/concepts/validators/#model-validators) for more details.</span><span style="color:rgb(175,0,0)">'</span>,
<span class="ansi-green-fg">    259</span>         stacklevel<span style="color:rgb(98,98,98)">=</span><span style="color:rgb(98,98,98)">2</span>,
<span class="ansi-green-fg">    260</span>     )

<span class="ansi-red-fg ansi-bold">ValidationError</span>: 1 validation error for ComplexUser
address.postal_code
  String should match pattern '^\d{5}$' [type=string_pattern_mismatch, input_value='0031', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/string_pattern_mismatch</pre>
</div>
</div>
</div>
</section>
</section>
<section id="fastapi-tutorial" class="level1">
<h1>🚀 FastAPI Tutorial</h1>
<section id="what-is-fastapi" class="level2">
<h2 class="anchored" data-anchor-id="what-is-fastapi">What is FastAPI?</h2>
<p><strong>FastAPI</strong> is a modern, fast (high-performance) web framework for building APIs with Python 3.7+ based on standard Python type hints.</p>
<section id="key-features-1" class="level3">
<h3 class="anchored" data-anchor-id="key-features-1">Key Features:</h3>
<ul>
<li><strong>Fast</strong>: One of the fastest Python frameworks available</li>
<li><strong>Easy</strong>: Designed to be easy to use and learn</li>
<li><strong>Standards-based</strong>: Based on OpenAPI and JSON Schema</li>
<li><strong>Automatic docs</strong>: Interactive API documentation</li>
<li><strong>Type Safety</strong>: Full type checking with Pydantic</li>
<li><strong>Modern</strong>: Uses async/await for high performance</li>
</ul>
</section>
<section id="why-fastapi" class="level3">
<h3 class="anchored" data-anchor-id="why-fastapi">Why FastAPI?</h3>
<ol type="1">
<li><strong>Performance</strong>: Comparable to NodeJS and Go</li>
<li><strong>Developer Experience</strong>: Great autocomplete and error detection</li>
<li><strong>Standards</strong>: Follows web standards (OpenAPI, JSON Schema)</li>
<li><strong>Documentation</strong>: Automatic interactive docs</li>
<li><strong>Production Ready</strong>: Used by major companies</li>
</ol>
</section>
</section>
<section id="understanding-rest-apis" class="level2">
<h2 class="anchored" data-anchor-id="understanding-rest-apis">Understanding REST APIs</h2>
<section id="what-is-rest" class="level3">
<h3 class="anchored" data-anchor-id="what-is-rest">What is REST?</h3>
<p><strong>REST</strong> (Representational State Transfer) is an architectural style for designing networked applications. A RESTful API follows REST principles.</p>
<section id="rest-principles" class="level4">
<h4 class="anchored" data-anchor-id="rest-principles">REST Principles:</h4>
<ol type="1">
<li><strong>Stateless</strong>: Each request contains all information needed</li>
<li><strong>Client-Server</strong>: Separation of concerns</li>
<li><strong>Cacheable</strong>: Responses should be cacheable when possible</li>
<li><strong>Uniform Interface</strong>: Consistent way to interact with resources</li>
<li><strong>Layered System</strong>: Architecture can have multiple layers</li>
</ol>
</section>
<section id="http-methods-verbs" class="level4">
<h4 class="anchored" data-anchor-id="http-methods-verbs">HTTP Methods (Verbs):</h4>
<ul>
<li><strong>GET</strong>: Retrieve data (Read)</li>
<li><strong>POST</strong>: Create new resources (Create)</li>
<li><strong>PUT</strong>: Update entire resource (Update/Replace)</li>
<li><strong>PATCH</strong>: Partial update (Modify)</li>
<li><strong>DELETE</strong>: Remove resource (Delete)</li>
</ul>
</section>
<section id="http-status-codes" class="level4">
<h4 class="anchored" data-anchor-id="http-status-codes">HTTP Status Codes:</h4>
<ul>
<li><strong>200</strong>: OK - Success</li>
<li><strong>201</strong>: Created - Resource created successfully</li>
<li><strong>400</strong>: Bad Request - Invalid request</li>
<li><strong>401</strong>: Unauthorized - Authentication required</li>
<li><strong>403</strong>: Forbidden - Access denied</li>
<li><strong>404</strong>: Not Found - Resource doesn’t exist</li>
<li><strong>422</strong>: Unprocessable Entity - Validation error</li>
<li><strong>500</strong>: Internal Server Error - Server error</li>
</ul>
</section>
</section>
<section id="rest-api-structure" class="level3">
<h3 class="anchored" data-anchor-id="rest-api-structure">REST API Structure</h3>
<pre><code>GET    /users           # Get all users
GET    /users/123       # Get user with ID 123
POST   /users           # Create new user
PUT    /users/123       # Update user 123 (full update)
PATCH  /users/123       # Partially update user 123
DELETE /users/123       # Delete user 123</code></pre>
<div id="cell-61" class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># FastAPI Installation and Setup</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co"># !pip install fastapi uvicorn</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastapi <span class="im">import</span> FastAPI, HTTPException, Query, Path, Body, Depends</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastapi.responses <span class="im">import</span> HTMLResponse</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> typing <span class="im">import</span> List, Optional</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> uvicorn</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create FastAPI instance</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> FastAPI(</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"My API"</span>,</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    description<span class="op">=</span><span class="st">"A sample API built with FastAPI"</span>,</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    version<span class="op">=</span><span class="st">"1.0.0"</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"FastAPI app created!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="basic-fastapi-routes" class="level2">
<h2 class="anchored" data-anchor-id="basic-fastapi-routes">Basic FastAPI Routes</h2>
<p>Let’s create some basic API endpoints to understand how FastAPI works.</p>
<div id="cell-63" class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Basic Routes</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Root endpoint</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/"</span>)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> root():</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="st">"Hello World"</span>}</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple GET endpoint</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/hello/</span><span class="sc">{name}</span><span class="st">"</span>)</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> say_hello(name: <span class="bu">str</span>):</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="ss">f"Hello </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">!"</span>}</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="co"># GET with query parameters</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/items/"</span>)</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> read_items(skip: <span class="bu">int</span> <span class="op">=</span> <span class="dv">0</span>, limit: <span class="bu">int</span> <span class="op">=</span> <span class="dv">10</span>):</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"skip"</span>: skip, <span class="st">"limit"</span>: limit}</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Multiple path parameters</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/users/</span><span class="sc">{user_id}</span><span class="st">/items/</span><span class="sc">{item_id}</span><span class="st">"</span>)</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> read_user_item(user_id: <span class="bu">int</span>, item_id: <span class="bu">str</span>):</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"user_id"</span>: user_id, <span class="st">"item_id"</span>: item_id}</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional query parameters</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/search/"</span>)</span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> search_items(q: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span>, category: <span class="bu">str</span> <span class="op">=</span> <span class="st">"all"</span>):</span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> q:</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {<span class="st">"query"</span>: q, <span class="st">"category"</span>: category, <span class="st">"results"</span>: <span class="ss">f"Results for '</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss">' in </span><span class="sc">{</span>category<span class="sc">}</span><span class="ss">"</span>}</span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="st">"No query provided"</span>, <span class="st">"category"</span>: category}</span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Basic routes defined!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="using-pydantic-models-with-fastapi" class="level2">
<h2 class="anchored" data-anchor-id="using-pydantic-models-with-fastapi">Using Pydantic Models with FastAPI</h2>
<p>FastAPI integrates seamlessly with Pydantic for request/response validation.</p>
<div id="cell-65" class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pydantic models for API</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserCreate(BaseModel):</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    username: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">3</span>, max_length<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span> <span class="op">=</span> Field(description<span class="op">=</span><span class="st">"Valid email address"</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    full_name: <span class="bu">str</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>] <span class="op">=</span> Field(default<span class="op">=</span><span class="va">None</span>, ge<span class="op">=</span><span class="dv">0</span>, le<span class="op">=</span><span class="dv">150</span>)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserResponse(BaseModel):</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>: <span class="bu">int</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    username: <span class="bu">str</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    full_name: <span class="bu">str</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>]</span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>    is_active: <span class="bu">bool</span> <span class="op">=</span> <span class="va">True</span></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>    created_at: datetime</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserUpdate(BaseModel):</span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>    username: Optional[<span class="bu">str</span>] <span class="op">=</span> Field(default<span class="op">=</span><span class="va">None</span>, min_length<span class="op">=</span><span class="dv">3</span>, max_length<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>    email: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>    full_name: Optional[<span class="bu">str</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>    age: Optional[<span class="bu">int</span>] <span class="op">=</span> Field(default<span class="op">=</span><span class="va">None</span>, ge<span class="op">=</span><span class="dv">0</span>, le<span class="op">=</span><span class="dv">150</span>)</span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a>    is_active: Optional[<span class="bu">bool</span>] <span class="op">=</span> <span class="va">None</span></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a><span class="co"># In-memory database (for demo purposes)</span></span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a>fake_users_db <span class="op">=</span> {}</span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>user_id_counter <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a><span class="co"># API endpoints with Pydantic models</span></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a><span class="at">@app.post</span>(<span class="st">"/users/"</span>, response_model<span class="op">=</span>UserResponse)</span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> create_user(user: UserCreate):</span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> user_id_counter</span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if username already exists</span></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> existing_user <span class="kw">in</span> fake_users_db.values():</span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> existing_user[<span class="st">'username'</span>] <span class="op">==</span> user.username:</span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">400</span>, detail<span class="op">=</span><span class="st">"Username already exists"</span>)</span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create new user</span></span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>    new_user <span class="op">=</span> {</span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"id"</span>: user_id_counter,</span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"username"</span>: user.username,</span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"email"</span>: user.email,</span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"full_name"</span>: user.full_name,</span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">"age"</span>: user.age,</span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">"is_active"</span>: <span class="va">True</span>,</span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">"created_at"</span>: datetime.now()</span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a>    fake_users_db[user_id_counter] <span class="op">=</span> new_user</span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a>    user_id_counter <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> new_user</span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/users/"</span>, response_model<span class="op">=</span>List[UserResponse])</span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_users(skip: <span class="bu">int</span> <span class="op">=</span> <span class="dv">0</span>, limit: <span class="bu">int</span> <span class="op">=</span> <span class="dv">10</span>):</span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a>    users <span class="op">=</span> <span class="bu">list</span>(fake_users_db.values())</span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> users[skip:skip <span class="op">+</span> limit]</span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/users/</span><span class="sc">{user_id}</span><span class="st">"</span>, response_model<span class="op">=</span>UserResponse)</span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_user(user_id: <span class="bu">int</span> <span class="op">=</span> Path(description<span class="op">=</span><span class="st">"The ID of the user to get"</span>)):</span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> user_id <span class="kw">not</span> <span class="kw">in</span> fake_users_db:</span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">404</span>, detail<span class="op">=</span><span class="st">"User not found"</span>)</span>
<span id="cb64-64"><a href="#cb64-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fake_users_db[user_id]</span>
<span id="cb64-65"><a href="#cb64-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-66"><a href="#cb64-66" aria-hidden="true" tabindex="-1"></a><span class="at">@app.put</span>(<span class="st">"/users/</span><span class="sc">{user_id}</span><span class="st">"</span>, response_model<span class="op">=</span>UserResponse)</span>
<span id="cb64-67"><a href="#cb64-67" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> update_user(user_id: <span class="bu">int</span>, user_update: UserUpdate):</span>
<span id="cb64-68"><a href="#cb64-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> user_id <span class="kw">not</span> <span class="kw">in</span> fake_users_db:</span>
<span id="cb64-69"><a href="#cb64-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">404</span>, detail<span class="op">=</span><span class="st">"User not found"</span>)</span>
<span id="cb64-70"><a href="#cb64-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-71"><a href="#cb64-71" aria-hidden="true" tabindex="-1"></a>    stored_user <span class="op">=</span> fake_users_db[user_id]</span>
<span id="cb64-72"><a href="#cb64-72" aria-hidden="true" tabindex="-1"></a>    update_data <span class="op">=</span> user_update.model_dump(exclude_unset<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb64-73"><a href="#cb64-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-74"><a href="#cb64-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> field, value <span class="kw">in</span> update_data.items():</span>
<span id="cb64-75"><a href="#cb64-75" aria-hidden="true" tabindex="-1"></a>        stored_user[field] <span class="op">=</span> value</span>
<span id="cb64-76"><a href="#cb64-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-77"><a href="#cb64-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> stored_user</span>
<span id="cb64-78"><a href="#cb64-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-79"><a href="#cb64-79" aria-hidden="true" tabindex="-1"></a><span class="at">@app.delete</span>(<span class="st">"/users/</span><span class="sc">{user_id}</span><span class="st">"</span>)</span>
<span id="cb64-80"><a href="#cb64-80" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> delete_user(user_id: <span class="bu">int</span>):</span>
<span id="cb64-81"><a href="#cb64-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> user_id <span class="kw">not</span> <span class="kw">in</span> fake_users_db:</span>
<span id="cb64-82"><a href="#cb64-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">404</span>, detail<span class="op">=</span><span class="st">"User not found"</span>)</span>
<span id="cb64-83"><a href="#cb64-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-84"><a href="#cb64-84" aria-hidden="true" tabindex="-1"></a>    deleted_user <span class="op">=</span> fake_users_db.pop(user_id)</span>
<span id="cb64-85"><a href="#cb64-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="ss">f"User </span><span class="sc">{</span>deleted_user[<span class="st">'username'</span>]<span class="sc">}</span><span class="ss"> deleted successfully"</span>}</span>
<span id="cb64-86"><a href="#cb64-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-87"><a href="#cb64-87" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"User API endpoints defined!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="advanced-fastapi-features" class="level2">
<h2 class="anchored" data-anchor-id="advanced-fastapi-features">Advanced FastAPI Features</h2>
<section id="query-parameters-with-validation" class="level3">
<h3 class="anchored" data-anchor-id="query-parameters-with-validation">Query Parameters with Validation</h3>
</section>
<section id="dependencies" class="level3">
<h3 class="anchored" data-anchor-id="dependencies">Dependencies</h3>
</section>
<section id="error-handling" class="level3">
<h3 class="anchored" data-anchor-id="error-handling">Error Handling</h3>
</section>
<section id="background-tasks" class="level3">
<h3 class="anchored" data-anchor-id="background-tasks">Background Tasks</h3>
<div id="cell-67" class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Advanced Query Parameters with Validation</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/advanced-search/"</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> advanced_search(</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    q: <span class="bu">str</span> <span class="op">=</span> Query(description<span class="op">=</span><span class="st">"Search query"</span>, min_length<span class="op">=</span><span class="dv">1</span>, max_length<span class="op">=</span><span class="dv">50</span>),</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    category: <span class="bu">str</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="st">"all"</span>, regex<span class="op">=</span><span class="st">"^(all|books|electronics|clothing)$"</span>),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    min_price: <span class="bu">float</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="dv">0</span>, ge<span class="op">=</span><span class="dv">0</span>, description<span class="op">=</span><span class="st">"Minimum price"</span>),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    max_price: <span class="bu">float</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="dv">1000</span>, le<span class="op">=</span><span class="dv">10000</span>, description<span class="op">=</span><span class="st">"Maximum price"</span>),</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    sort_by: <span class="bu">str</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="st">"relevance"</span>, regex<span class="op">=</span><span class="st">"^(relevance|price|date)$"</span>),</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    page: <span class="bu">int</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="dv">1</span>, ge<span class="op">=</span><span class="dv">1</span>, le<span class="op">=</span><span class="dv">100</span>, description<span class="op">=</span><span class="st">"Page number"</span>)</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"query"</span>: q,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"category"</span>: category,</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"price_range"</span>: {<span class="st">"min"</span>: min_price, <span class="st">"max"</span>: max_price},</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"sort_by"</span>: sort_by,</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"page"</span>: page,</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">"results"</span>: <span class="ss">f"Found results for '</span><span class="sc">{</span>q<span class="sc">}</span><span class="ss">' in </span><span class="sc">{</span>category<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Dependencies</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_current_user_id(user_id: <span class="bu">int</span> <span class="op">=</span> Query(description<span class="op">=</span><span class="st">"Current user ID"</span>)):</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># In a real app, this would validate JWT token</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> user_id <span class="op">&lt;=</span> <span class="dv">0</span>:</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">400</span>, detail<span class="op">=</span><span class="st">"Invalid user ID"</span>)</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> user_id</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_pagination_params(skip: <span class="bu">int</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="dv">0</span>, ge<span class="op">=</span><span class="dv">0</span>), limit: <span class="bu">int</span> <span class="op">=</span> Query(default<span class="op">=</span><span class="dv">10</span>, ge<span class="op">=</span><span class="dv">1</span>, le<span class="op">=</span><span class="dv">100</span>)):</span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"skip"</span>: skip, <span class="st">"limit"</span>: limit}</span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/my-profile/"</span>)</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_my_profile(current_user_id: <span class="bu">int</span> <span class="op">=</span> Depends(get_current_user_id)):</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> current_user_id <span class="kw">not</span> <span class="kw">in</span> fake_users_db:</span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> HTTPException(status_code<span class="op">=</span><span class="dv">404</span>, detail<span class="op">=</span><span class="st">"User not found"</span>)</span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fake_users_db[current_user_id]</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/users-paginated/"</span>, response_model<span class="op">=</span>List[UserResponse])</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_users_paginated(</span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>    pagination: <span class="bu">dict</span> <span class="op">=</span> Depends(get_pagination_params),</span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>    current_user_id: <span class="bu">int</span> <span class="op">=</span> Depends(get_current_user_id)</span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>    users <span class="op">=</span> <span class="bu">list</span>(fake_users_db.values())</span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>    skip <span class="op">=</span> pagination[<span class="st">"skip"</span>]</span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>    limit <span class="op">=</span> pagination[<span class="st">"limit"</span>]</span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> users[skip:skip <span class="op">+</span> limit]</span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom Exception Handler</span></span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CustomException(<span class="pp">Exception</span>):</span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, message: <span class="bu">str</span>):</span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.message <span class="op">=</span> message</span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a><span class="at">@app.exception_handler</span>(CustomException)</span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> custom_exception_handler(request, exc: CustomException):</span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"error"</span>: <span class="st">"Custom Error"</span>, <span class="st">"message"</span>: exc.message, <span class="st">"status_code"</span>: <span class="dv">400</span>}</span>
<span id="cb65-54"><a href="#cb65-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-55"><a href="#cb65-55" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/trigger-error/"</span>)</span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> trigger_error():</span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">raise</span> CustomException(<span class="st">"This is a custom error!"</span>)</span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Background Tasks</span></span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastapi <span class="im">import</span> BackgroundTasks</span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> write_log(message: <span class="bu">str</span>):</span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate time-consuming task</span></span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="dv">2</span>)</span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"LOG: </span><span class="sc">{</span>message<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>datetime<span class="sc">.</span>now()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-68"><a href="#cb65-68" aria-hidden="true" tabindex="-1"></a><span class="at">@app.post</span>(<span class="st">"/send-notification/"</span>)</span>
<span id="cb65-69"><a href="#cb65-69" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> send_notification(email: <span class="bu">str</span>, background_tasks: BackgroundTasks):</span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a>    background_tasks.add_task(write_log, <span class="ss">f"Notification sent to </span><span class="sc">{</span>email<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="st">"Notification will be sent in the background"</span>}</span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-73"><a href="#cb65-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Health check endpoint</span></span>
<span id="cb65-74"><a href="#cb65-74" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/health/"</span>)</span>
<span id="cb65-75"><a href="#cb65-75" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> health_check():</span>
<span id="cb65-76"><a href="#cb65-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb65-77"><a href="#cb65-77" aria-hidden="true" tabindex="-1"></a>        <span class="st">"status"</span>: <span class="st">"healthy"</span>,</span>
<span id="cb65-78"><a href="#cb65-78" aria-hidden="true" tabindex="-1"></a>        <span class="st">"timestamp"</span>: datetime.now(),</span>
<span id="cb65-79"><a href="#cb65-79" aria-hidden="true" tabindex="-1"></a>        <span class="st">"version"</span>: <span class="st">"1.0.0"</span>,</span>
<span id="cb65-80"><a href="#cb65-80" aria-hidden="true" tabindex="-1"></a>        <span class="st">"users_count"</span>: <span class="bu">len</span>(fake_users_db)</span>
<span id="cb65-81"><a href="#cb65-81" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-82"><a href="#cb65-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-83"><a href="#cb65-83" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Advanced FastAPI features added!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="running-the-fastapi-server" class="level2">
<h2 class="anchored" data-anchor-id="running-the-fastapi-server">Running the FastAPI Server</h2>
<p>To run your FastAPI application, you have several options:</p>
<div id="cell-69" class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Running FastAPI Server</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: Run with uvicorn directly (uncomment to run)</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># if __name__ == "__main__":</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     uvicorn.run(app, host="0.0.0.0", port=8000)</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: Save to a file (e.g., main.py) and run from terminal:</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="co"># uvicorn main:app --reload</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 3: Run in development mode with auto-reload</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="co"># uvicorn main:app --reload --host 0.0.0.0 --port 8000</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the OpenAPI schema</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== OpenAPI Schema Info ==="</span>)</span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Title: </span><span class="sc">{</span>app<span class="sc">.</span>title<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Version: </span><span class="sc">{</span>app<span class="sc">.</span>version<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Description: </span><span class="sc">{</span>app<span class="sc">.</span>description<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a><span class="co"># List all routes</span></span>
<span id="cb66-20"><a href="#cb66-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== Available Routes ==="</span>)</span>
<span id="cb66-21"><a href="#cb66-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> route <span class="kw">in</span> app.routes:</span>
<span id="cb66-22"><a href="#cb66-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">hasattr</span>(route, <span class="st">'methods'</span>) <span class="kw">and</span> <span class="bu">hasattr</span>(route, <span class="st">'path'</span>):</span>
<span id="cb66-23"><a href="#cb66-23" aria-hidden="true" tabindex="-1"></a>        methods <span class="op">=</span> <span class="st">', '</span>.join(route.methods)</span>
<span id="cb66-24"><a href="#cb66-24" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>methods<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>route<span class="sc">.</span>path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb66-25"><a href="#cb66-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-26"><a href="#cb66-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">🌐 Once running, visit:"</span>)</span>
<span id="cb66-27"><a href="#cb66-27" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📖 Interactive docs: http://localhost:8000/docs"</span>)</span>
<span id="cb66-28"><a href="#cb66-28" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"📋 Alternative docs: http://localhost:8000/redoc"</span>)</span>
<span id="cb66-29"><a href="#cb66-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"🔧 OpenAPI schema: http://localhost:8000/openapi.json"</span>)</span>
<span id="cb66-30"><a href="#cb66-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-31"><a href="#cb66-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of testing endpoints (you would normally use requests library)</span></span>
<span id="cb66-32"><a href="#cb66-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== Example API Usage ==="</span>)</span>
<span id="cb66-33"><a href="#cb66-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"# Create a user"</span>)</span>
<span id="cb66-34"><a href="#cb66-34" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"POST /users/"</span>)</span>
<span id="cb66-35"><a href="#cb66-35" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Body: {"</span>)</span>
<span id="cb66-36"><a href="#cb66-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'  "username": "johndoe",'</span>)</span>
<span id="cb66-37"><a href="#cb66-37" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'  "email": "john@example.com",'</span>)</span>
<span id="cb66-38"><a href="#cb66-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'  "full_name": "John Doe",'</span>)</span>
<span id="cb66-39"><a href="#cb66-39" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'  "age": 30'</span>)</span>
<span id="cb66-40"><a href="#cb66-40" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"}"</span>)</span>
<span id="cb66-41"><a href="#cb66-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-42"><a href="#cb66-42" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st"># Get all users"</span>)</span>
<span id="cb66-43"><a href="#cb66-43" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GET /users/"</span>)</span>
<span id="cb66-44"><a href="#cb66-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-45"><a href="#cb66-45" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st"># Get specific user"</span>)</span>
<span id="cb66-46"><a href="#cb66-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"GET /users/1"</span>)</span>
<span id="cb66-47"><a href="#cb66-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-48"><a href="#cb66-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st"># Update user"</span>)</span>
<span id="cb66-49"><a href="#cb66-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"PUT /users/1"</span>)</span>
<span id="cb66-50"><a href="#cb66-50" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Body: {"</span>)</span>
<span id="cb66-51"><a href="#cb66-51" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'  "full_name": "John Smith"'</span>)</span>
<span id="cb66-52"><a href="#cb66-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"}"</span>)</span>
<span id="cb66-53"><a href="#cb66-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-54"><a href="#cb66-54" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st"># Delete user"</span>)</span>
<span id="cb66-55"><a href="#cb66-55" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"DELETE /users/1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fastapi-vs-flask-comparison" class="level2">
<h2 class="anchored" data-anchor-id="fastapi-vs-flask-comparison">FastAPI vs Flask Comparison</h2>
<p>Let’s compare FastAPI with Flask, the most popular Python web framework, to understand their differences and use cases.</p>
<div id="cell-71" class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 1. Basic API Structure Comparison</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co">#### Flask Version:</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>```python</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, request, jsonify</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/'</span>)</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hello():</span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="st">"Hello World"</span>}</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/users/&lt;int:user_id&gt;'</span>)</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_user(user_id):</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"user_id"</span>: user_id}</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">'/users'</span>, methods<span class="op">=</span>[<span class="st">'POST'</span>])</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> create_user():</span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> request.get_json()</span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Manual validation required</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> data <span class="kw">or</span> <span class="st">'name'</span> <span class="kw">not</span> <span class="kw">in</span> data:</span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> {<span class="st">"error"</span>: <span class="st">"Name is required"</span>}, <span class="dv">400</span></span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="ss">f"User </span><span class="sc">{</span>data[<span class="st">'name'</span>]<span class="sc">}</span><span class="ss"> created"</span>}, <span class="dv">201</span></span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>```</span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a><span class="co">#### FastAPI Version:</span></span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>```python</span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastapi <span class="im">import</span> FastAPI</span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pydantic <span class="im">import</span> BaseModel</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>app <span class="op">=</span> FastAPI()</span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserCreate(BaseModel):</span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span></span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/"</span>)</span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> hello():</span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="st">"Hello World"</span>}</span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a><span class="at">@app.get</span>(<span class="st">"/users/</span><span class="sc">{user_id}</span><span class="st">"</span>)</span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> get_user(user_id: <span class="bu">int</span>):</span>
<span id="cb67-45"><a href="#cb67-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"user_id"</span>: user_id}</span>
<span id="cb67-46"><a href="#cb67-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-47"><a href="#cb67-47" aria-hidden="true" tabindex="-1"></a><span class="at">@app.post</span>(<span class="st">"/users/"</span>)</span>
<span id="cb67-48"><a href="#cb67-48" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> create_user(user: UserCreate):</span>
<span id="cb67-49"><a href="#cb67-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Automatic validation with Pydantic</span></span>
<span id="cb67-50"><a href="#cb67-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"message"</span>: <span class="ss">f"User </span><span class="sc">{</span>user<span class="sc">.</span>name<span class="sc">}</span><span class="ss"> created"</span>}</span>
<span id="cb67-51"><a href="#cb67-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-52"><a href="#cb67-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Run with: uvicorn main:app --reload</span></span>
<span id="cb67-53"><a href="#cb67-53" aria-hidden="true" tabindex="-1"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-72" class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 2. Request Validation Comparison</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Flask<span class="op">**</span>: Manual validation (tedious <span class="kw">and</span> error<span class="op">-</span>prone)  </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>FastAPI<span class="op">**</span>: Automatic validation <span class="cf">with</span> Pydantic (declarative <span class="kw">and</span> robust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-73" class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Demonstration of validation differences</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== VALIDATION COMPARISON DEMO ===</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate Flask-style manual validation</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flask_style_validation():</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"🌶️ FLASK - Manual Validation:"</span>)</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulating request data</span></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>    request_data <span class="op">=</span> {<span class="st">"name"</span>: <span class="st">"John"</span>, <span class="st">"age"</span>: <span class="st">"not_a_number"</span>, <span class="st">"email"</span>: <span class="st">"invalid_email"</span>}</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    errors <span class="op">=</span> []</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Manual validation (tedious!)</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'name'</span> <span class="kw">not</span> <span class="kw">in</span> request_data:</span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>        errors.append(<span class="st">"Name is required"</span>)</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> <span class="bu">len</span>(request_data[<span class="st">'name'</span>]) <span class="op">&lt;</span> <span class="dv">2</span>:</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>        errors.append(<span class="st">"Name too short"</span>)</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'age'</span> <span class="kw">in</span> request_data:</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>            age <span class="op">=</span> <span class="bu">int</span>(request_data[<span class="st">'age'</span>])</span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> age <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>                errors.append(<span class="st">"Age cannot be negative"</span>)</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>            errors.append(<span class="st">"Age must be a number"</span>)</span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'email'</span> <span class="kw">in</span> request_data:</span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">'@'</span> <span class="kw">not</span> <span class="kw">in</span> request_data[<span class="st">'email'</span>]:</span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>            errors.append(<span class="st">"Invalid email format"</span>)</span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> errors:</span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"❌ Validation errors: </span><span class="sc">{</span>errors<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"✅ Validation passed"</span>)</span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a><span class="co"># FastAPI automatic validation</span></span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> UserValidation(BaseModel):</span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>    name: <span class="bu">str</span> <span class="op">=</span> Field(min_length<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>    age: <span class="bu">int</span> <span class="op">=</span> Field(ge<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>    email: <span class="bu">str</span> <span class="op">=</span> Field(regex<span class="op">=</span><span class="vs">r'^[^@]+@[^@]+\.[^@]+$'</span>)</span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fastapi_style_validation():</span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">⚡ FASTAPI - Automatic Validation:"</span>)</span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>    request_data <span class="op">=</span> {<span class="st">"name"</span>: <span class="st">"John"</span>, <span class="st">"age"</span>: <span class="st">"not_a_number"</span>, <span class="st">"email"</span>: <span class="st">"invalid_email"</span>}</span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>        user <span class="op">=</span> UserValidation(<span class="op">**</span>request_data)</span>
<span id="cb69-51"><a href="#cb69-51" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"✅ Validation passed"</span>)</span>
<span id="cb69-52"><a href="#cb69-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">True</span></span>
<span id="cb69-53"><a href="#cb69-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> ValidationError <span class="im">as</span> e:</span>
<span id="cb69-54"><a href="#cb69-54" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"❌ Validation errors:"</span>)</span>
<span id="cb69-55"><a href="#cb69-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> error <span class="kw">in</span> e.errors():</span>
<span id="cb69-56"><a href="#cb69-56" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"   </span><span class="sc">{</span>error[<span class="st">'loc'</span>][<span class="dv">0</span>]<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>error[<span class="st">'msg'</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb69-57"><a href="#cb69-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">False</span></span>
<span id="cb69-58"><a href="#cb69-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-59"><a href="#cb69-59" aria-hidden="true" tabindex="-1"></a>flask_style_validation()</span>
<span id="cb69-60"><a href="#cb69-60" aria-hidden="true" tabindex="-1"></a>fastapi_style_validation()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-74" class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 3. Async Support Comparison</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Flask<span class="op">**</span>: Synchronous by default (blocking operations)  </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>FastAPI<span class="op">**</span>: Native <span class="cf">async</span><span class="op">/</span><span class="cf">await</span> support (concurrent processing)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-75" class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Async Support Demonstration</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> asyncio</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"=== ASYNC SUPPORT DEMO ===</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Flask - Synchronous (blocking)</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> flask_sync_endpoint():</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"🌶️ FLASK - Synchronous:"</span>)</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate database call</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    time.sleep(<span class="fl">0.1</span>)  <span class="co"># Blocking call</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> time.time()</span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"✅ Request completed in </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">:.3f}</span><span class="ss">s"</span>)</span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"data"</span>: <span class="st">"result"</span>}</span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a><span class="co"># FastAPI - Asynchronous (non-blocking)</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> fastapi_async_endpoint():</span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">⚡ FASTAPI - Asynchronous:"</span>)</span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate async database call</span></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.sleep(<span class="fl">0.1</span>)  <span class="co"># Non-blocking call</span></span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> time.time()</span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"✅ Request completed in </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">:.3f}</span><span class="ss">s"</span>)</span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {<span class="st">"data"</span>: <span class="st">"result"</span>}</span>
<span id="cb71-30"><a href="#cb71-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-31"><a href="#cb71-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Demonstrate the difference</span></span>
<span id="cb71-32"><a href="#cb71-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Single request timing:"</span>)</span>
<span id="cb71-33"><a href="#cb71-33" aria-hidden="true" tabindex="-1"></a>flask_sync_endpoint()</span>
<span id="cb71-34"><a href="#cb71-34" aria-hidden="true" tabindex="-1"></a>asyncio.run(fastapi_async_endpoint())</span>
<span id="cb71-35"><a href="#cb71-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-36"><a href="#cb71-36" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Concurrency simulation (5 requests):"</span>)</span>
<span id="cb71-37"><a href="#cb71-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-38"><a href="#cb71-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Flask-style sequential processing</span></span>
<span id="cb71-39"><a href="#cb71-39" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulate_flask_concurrent():</span>
<span id="cb71-40"><a href="#cb71-40" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb71-41"><a href="#cb71-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb71-42"><a href="#cb71-42" aria-hidden="true" tabindex="-1"></a>        time.sleep(<span class="fl">0.1</span>)  <span class="co"># Each request blocks</span></span>
<span id="cb71-43"><a href="#cb71-43" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> time.time()</span>
<span id="cb71-44"><a href="#cb71-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"🌶️ Flask (sequential): </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">:.3f}</span><span class="ss">s for 5 requests"</span>)</span>
<span id="cb71-45"><a href="#cb71-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-46"><a href="#cb71-46" aria-hidden="true" tabindex="-1"></a><span class="co"># FastAPI-style concurrent processing</span></span>
<span id="cb71-47"><a href="#cb71-47" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> simulate_fastapi_concurrent():</span>
<span id="cb71-48"><a href="#cb71-48" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb71-49"><a href="#cb71-49" aria-hidden="true" tabindex="-1"></a>    tasks <span class="op">=</span> [asyncio.sleep(<span class="fl">0.1</span>) <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>)]</span>
<span id="cb71-50"><a href="#cb71-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> asyncio.gather(<span class="op">*</span>tasks)  <span class="co"># All requests processed concurrently</span></span>
<span id="cb71-51"><a href="#cb71-51" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> time.time()</span>
<span id="cb71-52"><a href="#cb71-52" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"⚡ FastAPI (concurrent): </span><span class="sc">{</span>end <span class="op">-</span> start<span class="sc">:.3f}</span><span class="ss">s for 5 requests"</span>)</span>
<span id="cb71-53"><a href="#cb71-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-54"><a href="#cb71-54" aria-hidden="true" tabindex="-1"></a>simulate_flask_concurrent()</span>
<span id="cb71-55"><a href="#cb71-55" aria-hidden="true" tabindex="-1"></a>asyncio.run(simulate_fastapi_concurrent())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-76" class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 4. Documentation and Type Hints Comparison</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="co">#### Documentation:</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Feature <span class="op">|</span> Flask <span class="op">|</span> FastAPI <span class="op">|</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="op">|---------|-------|---------|</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Auto Documentation <span class="op">|</span> ❌ No <span class="op">|</span> ✅ Built<span class="op">-</span><span class="kw">in</span> <span class="op">|</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> API Schema <span class="op">|</span> ❌ Manual <span class="op">|</span> ✅ OpenAPI <span class="op">|</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Interactive Docs <span class="op">|</span> ⚠️ Extensions <span class="op">|</span> ✅ Swagger UI, ReDoc <span class="op">|</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Schema Validation <span class="op">|</span> ❌ No <span class="op">|</span> ✅ Yes <span class="op">|</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a><span class="co">#### Type Hints and IDE Support:</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Feature <span class="op">|</span> Flask <span class="op">|</span> FastAPI <span class="op">|</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="op">|---------|-------|---------|</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Type Hint Support <span class="op">|</span> ⚠️ Limited <span class="op">|</span> ✅ Full Support <span class="op">|</span></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Path Parameters <span class="op">|</span> ❌ Always strings <span class="op">|</span> ✅ Auto conversion <span class="op">|</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Request Validation <span class="op">|</span> ❌ Manual <span class="op">|</span> ✅ Automatic <span class="op">|</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> IDE Autocomplete <span class="op">|</span> ⚠️ Basic <span class="op">|</span> ✅ Excellent <span class="op">|</span></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>FastAPI Documentation URLs:<span class="op">**</span></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 📖 Interactive docs: `<span class="op">/</span>docs`</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 📋 Alternative docs: `<span class="op">/</span>redoc`</span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🔧 OpenAPI schema: `<span class="op">/</span>openapi.json`</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-77" class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 5. Performance Comparison</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co">#### Typical Benchmarks:</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>Flask<span class="op">**</span>: <span class="op">~</span><span class="dv">30</span>,<span class="dv">000</span> requests<span class="op">/</span>second</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>FastAPI<span class="op">**</span>: <span class="op">~</span><span class="dv">60</span>,<span class="dv">000</span><span class="op">+</span> requests<span class="op">/</span>second (<span class="cf">with</span> <span class="cf">async</span>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> <span class="op">**</span>Note<span class="op">**</span>: FastAPI often performs better due to <span class="cf">async</span> support <span class="kw">and</span> optimized internals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-78" class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Performance Testing Demo</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> performance_test():</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"=== PERFORMANCE COMPARISON DEMO ===</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Simulate request processing</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    iterations <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Flask-style processing (synchronous)</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(iterations):</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Simulate request handling overhead</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> {<span class="st">"name"</span>: <span class="st">"test"</span>, <span class="st">"age"</span>: <span class="dv">25</span>}</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Manual validation would add overhead</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>    flask_time <span class="op">=</span> time.time() <span class="op">-</span> start</span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># FastAPI-style processing (with validation)</span></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">class</span> TestModel(BaseModel):</span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>        name: <span class="bu">str</span></span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>        age: <span class="bu">int</span></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> time.time()</span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> _ <span class="kw">in</span> <span class="bu">range</span>(iterations):</span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Automatic validation and serialization</span></span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>        data <span class="op">=</span> {<span class="st">"name"</span>: <span class="st">"test"</span>, <span class="st">"age"</span>: <span class="dv">25</span>}</span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>        TestModel(<span class="op">**</span>data)</span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>    fastapi_time <span class="op">=</span> time.time() <span class="op">-</span> start</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"🌶️ Flask-style (</span><span class="sc">{</span>iterations<span class="sc">}</span><span class="ss"> requests): </span><span class="sc">{</span>flask_time<span class="sc">:.4f}</span><span class="ss">s"</span>)</span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"⚡ FastAPI-style (</span><span class="sc">{</span>iterations<span class="sc">}</span><span class="ss"> requests): </span><span class="sc">{</span>fastapi_time<span class="sc">:.4f}</span><span class="ss">s"</span>)</span>
<span id="cb74-33"><a href="#cb74-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb74-34"><a href="#cb74-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> fastapi_time <span class="op">&gt;</span> flask_time:</span>
<span id="cb74-35"><a href="#cb74-35" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"📊 FastAPI overhead: </span><span class="sc">{</span>((fastapi_time <span class="op">/</span> flask_time <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">100</span>)<span class="sc">:.1f}</span><span class="ss">% (due to validation)"</span>)</span>
<span id="cb74-36"><a href="#cb74-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb74-37"><a href="#cb74-37" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"📊 FastAPI is </span><span class="sc">{</span>((flask_time <span class="op">/</span> fastapi_time <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> <span class="dv">100</span>)<span class="sc">:.1f}</span><span class="ss">% faster"</span>)</span>
<span id="cb74-38"><a href="#cb74-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-39"><a href="#cb74-39" aria-hidden="true" tabindex="-1"></a>performance_test()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-79" class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 6. Ecosystem and Extensions Comparison</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Feature <span class="op">|</span> Flask <span class="op">|</span> FastAPI <span class="op">|</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="op">|---------|-------|---------|</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Template Engine<span class="op">**</span> <span class="op">|</span> Jinja2 (built<span class="op">-</span><span class="kw">in</span>) <span class="op">|</span> Jinja2 (optional) <span class="op">|</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Database ORM<span class="op">**</span> <span class="op">|</span> SQLAlchemy (Flask<span class="op">-</span>SQLAlchemy) <span class="op">|</span> SQLAlchemy, Tortoise ORM <span class="op">|</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Authentication<span class="op">**</span> <span class="op">|</span> Flask<span class="op">-</span>Login, Flask<span class="op">-</span>JWT<span class="op">-</span>Extended <span class="op">|</span> Built<span class="op">-</span><span class="kw">in</span> OAuth2<span class="op">/</span>JWT support <span class="op">|</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>API Documentation<span class="op">**</span> <span class="op">|</span> Flask<span class="op">-</span>RESTX, Flask<span class="op">-</span>Swagger <span class="op">|</span> Built<span class="op">-</span><span class="kw">in</span> (Swagger UI, ReDoc) <span class="op">|</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Validation<span class="op">**</span> <span class="op">|</span> WTForms, Marshmallow <span class="op">|</span> Pydantic (built<span class="op">-</span><span class="kw">in</span>) <span class="op">|</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Testing<span class="op">**</span> <span class="op">|</span> pytest, Flask<span class="st">'s test client | pytest, TestClient (built-in) |</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="er">| **Admin Interface** | Flask-Admin | FastAPI-Admin, SQLAdmin |</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Migration<span class="op">**</span> <span class="op">|</span> Flask<span class="op">-</span>Migrate <span class="op">|</span> Alembic <span class="op">|</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Caching<span class="op">**</span> <span class="op">|</span> Flask<span class="op">-</span>Caching <span class="op">|</span> aiocache, Redis <span class="op">|</span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Background Tasks<span class="op">**</span> <span class="op">|</span> Celery <span class="op">|</span> Built<span class="op">-</span><span class="kw">in</span> background tasks, Celery <span class="op">|</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-80" class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 7. Use Cases and Learning Curve</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co">#### 🌶️ Flask Best For:</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🌐 Traditional web applications <span class="cf">with</span> templates</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 📊 Admin dashboards <span class="kw">and</span> internal tools</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🔧 Microservices <span class="cf">with</span> simple requirements</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 📚 Educational projects <span class="kw">and</span> prototypes</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🎨 Applications requiring fine<span class="op">-</span>grained control</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 💼 Existing codebases <span class="cf">with</span> Flask integration</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="co">#### ⚡ FastAPI Best For:</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🚀 Modern REST APIs <span class="kw">and</span> microservices</span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 📱 Mobile app backends</span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🤖 Machine learning model serving</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🔗 API<span class="op">-</span>first applications</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚡ High<span class="op">-</span>performance real<span class="op">-</span>time applications</span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 📈 Data science <span class="kw">and</span> analytics APIs</span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 🔄 Integration APIs <span class="kw">and</span> webhooks</span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a><span class="co">#### Learning and Development Comparison:</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Aspect <span class="op">|</span> Flask <span class="op">|</span> FastAPI <span class="op">|</span></span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a><span class="op">|--------|-------|---------|</span></span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Beginner Friendliness<span class="op">**</span> <span class="op">|</span> ✅ Very Easy <span class="op">|</span> ⚠️ Medium <span class="op">|</span></span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Documentation Quality<span class="op">**</span> <span class="op">|</span> ✅ Excellent <span class="op">|</span> ✅ Excellent <span class="op">|</span></span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Community Size<span class="op">**</span> <span class="op">|</span> ✅ Large <span class="op">|</span> ⚠️ Growing <span class="op">|</span></span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Job Market<span class="op">**</span> <span class="op">|</span> ✅ Many opportunities <span class="op">|</span> 📈 Rapidly growing <span class="op">|</span></span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Development Speed<span class="op">**</span> <span class="op">|</span> ⚠️ Slower (more setup) <span class="op">|</span> ✅ Faster (less boilerplate) <span class="op">|</span></span>
<span id="cb76-29"><a href="#cb76-29" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Debugging<span class="op">**</span> <span class="op">|</span> ✅ Mature tools <span class="op">|</span> ✅ Good tools <span class="op">|</span></span>
<span id="cb76-30"><a href="#cb76-30" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Type Safety<span class="op">**</span> <span class="op">|</span> ❌ Limited <span class="op">|</span> ✅ Excellent <span class="op">|</span></span>
<span id="cb76-31"><a href="#cb76-31" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Modern Features<span class="op">**</span> <span class="op">|</span> ⚠️ Requires extensions <span class="op">|</span> ✅ Built<span class="op">-</span><span class="kw">in</span> <span class="op">|</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-81" class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 8. Comprehensive Feature Comparison</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> Feature <span class="op">|</span> Flask <span class="op">|</span> FastAPI <span class="op">|</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="op">|---------|-------|---------|</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Released<span class="op">**</span> <span class="op">|</span> <span class="dv">2010</span> <span class="op">|</span> <span class="dv">2018</span> <span class="op">|</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Type Hints<span class="op">**</span> <span class="op">|</span> ⚠️ Limited <span class="op">|</span> ✅ Full Support <span class="op">|</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Async<span class="op">/</span>Await<span class="op">**</span> <span class="op">|</span> ⚠️ Extension <span class="op">|</span> ✅ Native <span class="op">|</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Auto Documentation<span class="op">**</span> <span class="op">|</span> ❌ No <span class="op">|</span> ✅ Built<span class="op">-</span><span class="kw">in</span> <span class="op">|</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Request Validation<span class="op">**</span> <span class="op">|</span> ❌ Manual <span class="op">|</span> ✅ Automatic <span class="op">|</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Response Serialization<span class="op">**</span> <span class="op">|</span> ❌ Manual <span class="op">|</span> ✅ Automatic <span class="op">|</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Performance<span class="op">**</span> <span class="op">|</span> ⚠️ Good <span class="op">|</span> ✅ Excellent <span class="op">|</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Learning Curve<span class="op">**</span> <span class="op">|</span> ✅ Easy <span class="op">|</span> ⚠️ Medium <span class="op">|</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Community<span class="op">**</span> <span class="op">|</span> ✅ Large <span class="op">|</span> 📈 Growing <span class="op">|</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Flexibility<span class="op">**</span> <span class="op">|</span> ✅ High <span class="op">|</span> ⚠️ Opinionated <span class="op">|</span></span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Boilerplate<span class="op">**</span> <span class="op">|</span> ⚠️ More <span class="op">|</span> ✅ Less <span class="op">|</span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Testing<span class="op">**</span> <span class="op">|</span> ✅ Mature <span class="op">|</span> ✅ Excellent <span class="op">|</span></span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Deployment<span class="op">**</span> <span class="op">|</span> ✅ Many options <span class="op">|</span> ✅ Modern options <span class="op">|</span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>WebSocket Support<span class="op">**</span> <span class="op">|</span> ⚠️ Extension <span class="op">|</span> ✅ Built<span class="op">-</span><span class="kw">in</span> <span class="op">|</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Background Tasks<span class="op">**</span> <span class="op">|</span> ⚠️ External <span class="op">|</span> ✅ Built<span class="op">-</span><span class="kw">in</span> <span class="op">|</span></span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Dependency Injection<span class="op">**</span> <span class="op">|</span> ❌ Manual <span class="op">|</span> ✅ Built<span class="op">-</span><span class="kw">in</span> <span class="op">|</span></span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>OpenAPI Schema<span class="op">**</span> <span class="op">|</span> ⚠️ Extension <span class="op">|</span> ✅ Automatic <span class="op">|</span></span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a><span class="op">|</span> <span class="op">**</span>Production Ready<span class="op">**</span> <span class="op">|</span> ✅ Very Mature <span class="op">|</span> ✅ Production Ready <span class="op">|</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-82" class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">### 9. Migration Considerations and Final Recommendations</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co">#### 🔄 Flask to FastAPI Migration:</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ✅ Similar routing concepts</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ✅ Can reuse business logic</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ Need to add Pydantic models</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ Convert to <span class="cf">async</span> (optional but recommended)</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ Update dependencies <span class="kw">and</span> middleware</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ✅ Testing patterns are similar</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="co">#### 📈 FastAPI to Flask Migration:</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ Lose automatic validation</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ Need manual documentation</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ More boilerplate code required</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ✅ More flexibility <span class="kw">in</span> some areas</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ⚠️ May need additional extensions</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a><span class="co">## 🎯 Final Recommendations</span></span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a><span class="co">### 🌶️ Choose Flask When:</span></span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Building traditional web applications</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Need maximum flexibility <span class="kw">and</span> control</span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Team <span class="kw">is</span> new to web development</span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Working <span class="cf">with</span> legacy systems</span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Building simple, small applications</span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Fine<span class="op">-</span>grained customization <span class="kw">is</span> required</span>
<span id="cb78-29"><a href="#cb78-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-30"><a href="#cb78-30" aria-hidden="true" tabindex="-1"></a><span class="co">### ⚡ Choose FastAPI When:</span></span>
<span id="cb78-31"><a href="#cb78-31" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Building modern APIs</span>
<span id="cb78-32"><a href="#cb78-32" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Type safety <span class="kw">is</span> important</span>
<span id="cb78-33"><a href="#cb78-33" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Need automatic documentation</span>
<span id="cb78-34"><a href="#cb78-34" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Performance <span class="kw">is</span> critical</span>
<span id="cb78-35"><a href="#cb78-35" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Building microservices</span>
<span id="cb78-36"><a href="#cb78-36" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Team values modern Python features</span>
<span id="cb78-37"><a href="#cb78-37" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> Integrating <span class="cf">with</span> ML<span class="op">/</span>AI models</span>
<span id="cb78-38"><a href="#cb78-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-39"><a href="#cb78-39" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb78-40"><a href="#cb78-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-41"><a href="#cb78-41" aria-hidden="true" tabindex="-1"></a><span class="co">## 🎯 Conclusion</span></span>
<span id="cb78-42"><a href="#cb78-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-43"><a href="#cb78-43" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Both frameworks are excellent choices<span class="op">!**</span></span>
<span id="cb78-44"><a href="#cb78-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-45"><a href="#cb78-45" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>Flask<span class="op">**</span>: Mature, flexible, great <span class="cf">for</span> learning</span>
<span id="cb78-46"><a href="#cb78-46" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>FastAPI<span class="op">**</span>: Modern, fast, API<span class="op">-</span>focused</span>
<span id="cb78-47"><a href="#cb78-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-48"><a href="#cb78-48" aria-hidden="true" tabindex="-1"></a><span class="op">**</span>Choice depends on project requirements <span class="kw">and</span> team preferences<span class="op">**</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="testing-your-api" class="level2">
<h2 class="anchored" data-anchor-id="testing-your-api">Testing Your API</h2>
<p>FastAPI makes it easy to test your API endpoints.</p>
<div id="cell-84" class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Testing FastAPI with TestClient</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastapi.testclient <span class="im">import</span> TestClient</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a test client</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> TestClient(app)</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_api_endpoints():</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"=== Testing API Endpoints ==="</span>)</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test root endpoint</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.get(<span class="st">"/"</span>)</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"GET /: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test hello endpoint</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.get(<span class="st">"/hello/FastAPI"</span>)</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"GET /hello/FastAPI: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test search with query parameters</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.get(<span class="st">"/search/?q=python&amp;category=books"</span>)</span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"GET /search/: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test creating a user</span></span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a>    user_data <span class="op">=</span> {</span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"username"</span>: <span class="st">"testuser"</span>,</span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"email"</span>: <span class="st">"test@example.com"</span>,</span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">"full_name"</span>: <span class="st">"Test User"</span>,</span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"age"</span>: <span class="dv">25</span></span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.post(<span class="st">"/users/"</span>, json<span class="op">=</span>user_data)</span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"POST /users/: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">200</span>:</span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a>        user_id <span class="op">=</span> response.json()[<span class="st">"id"</span>]</span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Test getting the user</span></span>
<span id="cb79-36"><a href="#cb79-36" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> client.get(<span class="ss">f"/users/</span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-37"><a href="#cb79-37" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"GET /users/</span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-38"><a href="#cb79-38" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-39"><a href="#cb79-39" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Test updating the user</span></span>
<span id="cb79-40"><a href="#cb79-40" aria-hidden="true" tabindex="-1"></a>        update_data <span class="op">=</span> {<span class="st">"full_name"</span>: <span class="st">"Updated Test User"</span>}</span>
<span id="cb79-41"><a href="#cb79-41" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> client.put(<span class="ss">f"/users/</span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss">"</span>, json<span class="op">=</span>update_data)</span>
<span id="cb79-42"><a href="#cb79-42" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"PUT /users/</span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-43"><a href="#cb79-43" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-44"><a href="#cb79-44" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Test getting all users</span></span>
<span id="cb79-45"><a href="#cb79-45" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> client.get(<span class="st">"/users/"</span>)</span>
<span id="cb79-46"><a href="#cb79-46" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"GET /users/: </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - Found </span><span class="sc">{</span><span class="bu">len</span>(response.json())<span class="sc">}</span><span class="ss"> users"</span>)</span>
<span id="cb79-47"><a href="#cb79-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-48"><a href="#cb79-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test error handling</span></span>
<span id="cb79-49"><a href="#cb79-49" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.get(<span class="st">"/users/999"</span>)  <span class="co"># Non-existent user</span></span>
<span id="cb79-50"><a href="#cb79-50" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"GET /users/999 (not found): </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-51"><a href="#cb79-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-52"><a href="#cb79-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Test validation error</span></span>
<span id="cb79-53"><a href="#cb79-53" aria-hidden="true" tabindex="-1"></a>    invalid_user <span class="op">=</span> {<span class="st">"username"</span>: <span class="st">"ab"</span>, <span class="st">"email"</span>: <span class="st">"invalid"</span>}  <span class="co"># Too short username, invalid email</span></span>
<span id="cb79-54"><a href="#cb79-54" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> client.post(<span class="st">"/users/"</span>, json<span class="op">=</span>invalid_user)</span>
<span id="cb79-55"><a href="#cb79-55" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"POST /users/ (invalid): </span><span class="sc">{</span>response<span class="sc">.</span>status_code<span class="sc">}</span><span class="ss"> - </span><span class="sc">{</span>response<span class="sc">.</span>json()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb79-56"><a href="#cb79-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-57"><a href="#cb79-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the tests</span></span>
<span id="cb79-58"><a href="#cb79-58" aria-hidden="true" tabindex="-1"></a>test_api_endpoints()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="best-practices" class="level2">
<h2 class="anchored" data-anchor-id="best-practices">Best Practices</h2>
<section id="pydantic-best-practices" class="level3">
<h3 class="anchored" data-anchor-id="pydantic-best-practices">Pydantic Best Practices:</h3>
<ol type="1">
<li><strong>Use Field constraints</strong> for validation</li>
<li><strong>Create separate models</strong> for requests and responses</li>
<li><strong>Use custom validators</strong> for complex validation logic</li>
<li><strong>Leverage type hints</strong> for better IDE support</li>
<li><strong>Document your models</strong> with descriptions</li>
</ol>
</section>
<section id="fastapi-best-practices" class="level3">
<h3 class="anchored" data-anchor-id="fastapi-best-practices">FastAPI Best Practices:</h3>
<ol type="1">
<li><strong>Use dependency injection</strong> for reusable logic</li>
<li><strong>Separate concerns</strong> - models, routes, business logic</li>
<li><strong>Handle errors gracefully</strong> with proper HTTP status codes</li>
<li><strong>Use background tasks</strong> for time-consuming operations</li>
<li><strong>Add proper documentation</strong> to your endpoints</li>
<li><strong>Use environment variables</strong> for configuration</li>
<li><strong>Implement proper authentication</strong> and authorization</li>
<li><strong>Add logging</strong> for debugging and monitoring</li>
</ol>
</section>
<section id="project-structure" class="level3">
<h3 class="anchored" data-anchor-id="project-structure">Project Structure:</h3>
<pre><code>my_fastapi_project/
├── app/
│   ├── __init__.py
│   ├── main.py          # FastAPI app
│   ├── models/          # Pydantic models
│   │   ├── __init__.py
│   │   └── user.py
│   ├── routers/         # API routes
│   │   ├── __init__.py
│   │   └── users.py
│   ├── dependencies/    # Dependency functions
│   │   ├── __init__.py
│   │   └── auth.py
│   └── database/        # Database connection
│       ├── __init__.py
│       └── connection.py
├── tests/               # Test files
├── requirements.txt     # Dependencies
└── README.md           # Documentation</code></pre>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<section id="what-we-learned" class="level3">
<h3 class="anchored" data-anchor-id="what-we-learned">What We Learned:</h3>
<section id="pydantic" class="level4">
<h4 class="anchored" data-anchor-id="pydantic">Pydantic:</h4>
<ul>
<li>✅ Data validation with type hints</li>
<li>✅ Field constraints and custom validators</li>
<li>✅ Nested models and complex structures</li>
<li>✅ Automatic type conversion</li>
<li>✅ Detailed error messages</li>
</ul>
</section>
<section id="fastapi" class="level4">
<h4 class="anchored" data-anchor-id="fastapi">FastAPI:</h4>
<ul>
<li>✅ REST API principles and HTTP methods</li>
<li>✅ Creating API endpoints with different HTTP methods</li>
<li>✅ Request/response validation with Pydantic</li>
<li>✅ Query parameters and path parameters</li>
<li>✅ Dependency injection</li>
<li>✅ Error handling and custom exceptions</li>
<li>✅ Background tasks</li>
<li>✅ Automatic API documentation</li>
<li>✅ Testing with TestClient</li>
</ul>
</section>
</section>
<section id="next-steps" class="level3">
<h3 class="anchored" data-anchor-id="next-steps">Next Steps:</h3>
<ol type="1">
<li><strong>Database Integration</strong> - Use SQLAlchemy or other ORMs</li>
<li><strong>Authentication</strong> - Implement JWT or OAuth2</li>
<li><strong>Middleware</strong> - Add CORS, logging, rate limiting</li>
<li><strong>Deployment</strong> - Deploy to production with Docker</li>
<li><strong>Monitoring</strong> - Add health checks and metrics</li>
<li><strong>Security</strong> - Input sanitization, rate limiting</li>
</ol>
</section>
</section>
</section>
<section id="գործնական" class="level1">
<h1>🛠️ Գործնական</h1>
<section id="exercise-1-pydantic-models" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1-pydantic-models">Exercise 1: Pydantic Models</h2>
<p>Create a <code>Book</code> model with the following fields: - <code>id</code>: integer (positive) - <code>title</code>: string (3-100 characters) - <code>author</code>: string (2-50 characters)<br>
- <code>isbn</code>: string (must match ISBN-10 or ISBN-13 format) - <code>price</code>: float (positive) - <code>publication_year</code>: integer (1900-2024) - <code>genre</code>: enum (fiction, non-fiction, science, history, biography) - <code>available</code>: boolean (default True)</p>
<p>Add custom validators to ensure: - ISBN format is correct - Publication year is not in the future - Title and author don’t contain only numbers</p>
</section>
<section id="exercise-2-fastapi-blog-api" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2-fastapi-blog-api">Exercise 2: FastAPI Blog API</h2>
<p>Create a simple blog API with the following endpoints:</p>
<section id="models-needed" class="level3">
<h3 class="anchored" data-anchor-id="models-needed">Models needed:</h3>
<ul>
<li><code>Post</code> (id, title, content, author_id, created_at, published)</li>
<li><code>Author</code> (id, name, email, bio)</li>
<li><code>Comment</code> (id, post_id, author_name, content, created_at)</li>
</ul>
</section>
<section id="endpoints-to-implement" class="level3">
<h3 class="anchored" data-anchor-id="endpoints-to-implement">Endpoints to implement:</h3>
<ul>
<li><code>GET /posts/</code> - Get all posts (with pagination)</li>
<li><code>GET /posts/{post_id}</code> - Get specific post</li>
<li><code>POST /posts/</code> - Create new post</li>
<li><code>PUT /posts/{post_id}</code> - Update post</li>
<li><code>DELETE /posts/{post_id}</code> - Delete post</li>
<li><code>GET /posts/{post_id}/comments</code> - Get post comments</li>
<li><code>POST /posts/{post_id}/comments</code> - Add comment to post</li>
<li><code>GET /authors/</code> - Get all authors</li>
<li><code>POST /authors/</code> - Create new author</li>
</ul>
</section>
</section>
<section id="exercise-3-advanced-features" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3-advanced-features">Exercise 3: Advanced Features</h2>
<p>Extend the blog API with: - Search functionality (by title, author, content) - Filtering (by publication date, author, published status) - Authentication simulation (using dependency injection) - Error handling for all edge cases - Background task for sending “new post” notifications</p>
</section>
<section id="challenge-e-commerce-api" class="level2">
<h2 class="anchored" data-anchor-id="challenge-e-commerce-api">Challenge: E-commerce API</h2>
<p>Create a mini e-commerce API with products, orders, and customers: - Implement proper relationships between models - Add inventory management - Include order status tracking - Add product search and filtering - Implement proper error handling and validation</p>
</section>
</section>
<section id="տնային-1" class="level1">
<h1>🏡Տնային</h1>
<section id="homework-1-library-management-system-pydantic-focus" class="level2">
<h2 class="anchored" data-anchor-id="homework-1-library-management-system-pydantic-focus">Homework 1: Library Management System (Pydantic Focus)</h2>
<p>Create Pydantic models for a library management system:</p>
<section id="required-models" class="level3">
<h3 class="anchored" data-anchor-id="required-models">Required Models:</h3>
<ol type="1">
<li><strong>Member</strong>
<ul>
<li>member_id, name, email, phone, address, membership_date</li>
<li>Add validation for email and phone formats</li>
<li>Add age calculation from birth_date</li>
</ul></li>
<li><strong>Book</strong>
<ul>
<li>book_id, title, authors (list), isbn, genre, publication_year, pages</li>
<li>Custom validator for ISBN format</li>
<li>Ensure publication_year is reasonable</li>
</ul></li>
<li><strong>BorrowRecord</strong>
<ul>
<li>record_id, member_id, book_id, borrow_date, due_date, return_date</li>
<li>Automatically calculate due_date (14 days from borrow_date)</li>
<li>Validate that return_date is not before borrow_date</li>
</ul></li>
</ol>
</section>
<section id="requirements" class="level3">
<h3 class="anchored" data-anchor-id="requirements">Requirements:</h3>
<ul>
<li>Use proper Field constraints</li>
<li>Add comprehensive custom validators</li>
<li>Include proper error handling examples</li>
<li>Create test data and demonstrate validation</li>
</ul>
</section>
</section>
<section id="homework-2-task-management-api-fastapi-focus" class="level2">
<h2 class="anchored" data-anchor-id="homework-2-task-management-api-fastapi-focus">Homework 2: Task Management API (FastAPI Focus)</h2>
<p>Build a complete task management REST API:</p>
<section id="features-required" class="level3">
<h3 class="anchored" data-anchor-id="features-required">Features Required:</h3>
<ol type="1">
<li><strong>User Management</strong>
<ul>
<li>Register, login (simulation), get profile</li>
<li>Users can only access their own tasks</li>
</ul></li>
<li><strong>Task Management</strong>
<ul>
<li>CRUD operations for tasks</li>
<li>Tasks have: title, description, status, priority, due_date, assigned_user</li>
<li>Filter tasks by status, priority, due date</li>
<li>Search tasks by title/description</li>
</ul></li>
<li><strong>Advanced Features</strong>
<ul>
<li>Task status transitions (todo → in_progress → done)</li>
<li>Bulk operations (mark multiple tasks as done)</li>
<li>Task statistics endpoint</li>
<li>Export tasks to JSON</li>
</ul></li>
</ol>
</section>
<section id="technical-requirements" class="level3">
<h3 class="anchored" data-anchor-id="technical-requirements">Technical Requirements:</h3>
<ul>
<li>Use proper HTTP status codes</li>
<li>Implement comprehensive error handling</li>
<li>Add request/response logging</li>
<li>Include API documentation</li>
<li>Write unit tests for all endpoints</li>
<li>Use dependency injection for user authentication</li>
</ul>
</section>
</section>
<section id="homework-3-integration-project" class="level2">
<h2 class="anchored" data-anchor-id="homework-3-integration-project">Homework 3: Integration Project</h2>
<p>Combine both technologies to create a <strong>Recipe Sharing Platform</strong>:</p>
<section id="models-pydantic" class="level3">
<h3 class="anchored" data-anchor-id="models-pydantic">Models (Pydantic):</h3>
<ul>
<li>User, Recipe, Ingredient, Review, Category</li>
<li>Complex validation rules</li>
<li>Nested structures for ingredients with quantities</li>
</ul>
</section>
<section id="api-fastapi" class="level3">
<h3 class="anchored" data-anchor-id="api-fastapi">API (FastAPI):</h3>
<ul>
<li>Complete CRUD for all entities</li>
<li>Recipe search and filtering</li>
<li>User authentication simulation</li>
<li>Recipe rating system</li>
<li>Favorite recipes functionality</li>
<li>Recipe recommendation endpoint</li>
</ul>
</section>
<section id="deliverables" class="level3">
<h3 class="anchored" data-anchor-id="deliverables">Deliverables:</h3>
<ol type="1">
<li>Working FastAPI application</li>
<li>Comprehensive test suite</li>
<li>API documentation (auto-generated + manual)</li>
<li>Example client code showing API usage</li>
<li>Performance considerations document</li>
</ol>
</section>
<section id="bonus-points" class="level3">
<h3 class="anchored" data-anchor-id="bonus-points">Bonus Points:</h3>
<ul>
<li>Implement caching for frequently accessed recipes</li>
<li>Add image upload simulation for recipes</li>
<li>Create a simple HTML frontend</li>
<li>Add rate limiting for API endpoints</li>
<li>Implement soft delete functionality</li>
</ul>
</section>
</section>
</section>
<section id="section" class="level1">
<h1>🎲 00</h1>
<ul>
<li>▶️<a href="">Video</a></li>
<li>🔗<a href="">Random link</a></li>
<li>🇦🇲🎶<a href=""></a></li>
<li>🌐🎶<a href=""></a></li>
<li>🤌<a href="">Կարգին</a></li>
</ul>
<p><a href="http://s01.flagcounter.com/more/1oO"><img src="https://s01.flagcounter.com/count2/1oO/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_10/viewers_0/labels_0/pageviews_1/flags_0/percent_0/" alt="Flag Counter"></a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../python_libs/12_sql.html" class="pagination-link" aria-label="12 SQL (with Python)">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">12 SQL (with Python)</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../python_libs/00_misc_libraries.html" class="pagination-link" aria-label="00 Misc: python-dotenv, ToDo">
        <span class="nav-page-text"><span class="chapter-title">00 Misc: python-dotenv, ToDo</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.dev/HaykTarkhanyan/python_math_ml_course/blob/main/python_libs/13_pydantic.ipynb" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>